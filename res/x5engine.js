var _jq=$.noConflict(!0);try{window.$=_jq,window.jQuery=_jq}catch(Excp){}var x5engine={};_jq.extend(x5engine,{imAccess:{showLogout:function(){_jq(".imLogout").empty(),x5engine.utils.isOnline()?_jq.imCookie("im_access_cookie_uid")!=null&&_jq.imCookie("im_access_cookie_uid")!=""&&_jq(".imLogout").append('<a class="imLogoutLink" href="res/imlogout.php">'+x5engine.l10n.getLocalization("private_area_logout")+"</a>"):_jq(".imLogout").append('<a class="imLogoutLink" href="#">'+x5engine.l10n.getLocalization("private_area_logout")+"</a>")}}}),_jq.extend(x5engine,{imAccordion:function(a,b){var c=null,d=null,e=function(a,b){b=b||400,c=c||a.css("padding"),d=d||a.height(),a.css({padding:0,overflow:"hidden"}),a.animate({height:0,padding:0},b)},f=function(a,b){a.css({padding:c,overflow:"hidden"}),a.animate({height:d},b)};e(_jq(a+" .imAccContent"),1);for(var g=0;g<_jq(a+" li").length;g++)_jq(a+" li:eq("+g+")").attr("id",x5engine.utils.createId("imAccLi"));b!=null&&f(_jq(a+" li:eq("+b+")"+" .imAccContent"),1),_jq(a+" li").click(function(){if(_jq(this).find(".imAccContent").height()==0){for(var b=0;b<_jq(a+" li").length;b++)_jq(a+" li:eq("+b+")").attr("id")!=_jq(this).attr("id")&&e(_jq(a+" li:eq("+b+") .imAccContent"));f(_jq(this).find(".imAccContent"))}else e(_jq(this).find(".imAccContent"))})}}),_jq.extend(x5engine,{imAdv:{width:null,height:null,imShowAdv:function(a,b,c,d,e){var f="imWebSiteX5Adv",g=/MSIE [6]/.test(navigator.userAgent);x5engine.imAdv.width=a,x5engine.imAdv.height=a;var h=a,i=a,j='<div id="'+f+'" style="height: '+i/4+"px; width: "+h/4+'px;">',k=x5engine.utils.isOnline()?0:1;g?_jq("body").append(j+'<object id="'+f+'Obj" style="left: -'+parseInt(h-h/4)+'px" data="res/x5ad.swf?File='+c+"&SoundFile="+escape(d)+"&Url="+e+"&Scale="+b+"&Preview="+k+'" '+'type="application/x-shockwave-flash" width="'+h+'" height="'+i+'">'+'<param name="movie" value="x5advcorner.swf?File='+c+"&SoundFile="+d+"&Url="+e+"&Scale="+b+"&Preview="+k+'">'+'<param name="wmode" value="transparent">'+'<param name="menu" value="false">'+'<param name="allowscriptaccess" value="samedomain">'+'<param name="quality" value="high">'+'<param name="flashvars" value="Licence=Only_For_Incomedia_WebSiteX5&Copyrights=WebSiteX5.com">'+"</object></div>"):_jq("body").append(j+'<embed id="'+f+'Obj" style="left: -'+parseInt(h-h/4)+'px" src="res/x5ad.swf?File='+c+"&SoundFile="+escape(d)+"&Url="+e+"&Scale="+b+"&Preview="+k+'" '+'type="application/x-shockwave-flash" width="'+h+'" height="'+i+'" wmode="transparent" menu="false" '+'allowscriptaccess="samedomain" quality="high" flashvars="Licence=Only_For_Incomedia_WebSiteX5&Copyrights=WebSiteX5.com">'+"</embed></div>");var l=_jq("#"+f);l.css({padding:0,margin:0});if(k){var m=_jq("#"+f+"Obj"),n=function(){l.width(h),l.height(i),m.css("left",0)},o=function(){l.unbind("mouseleave"),go=!0,setTimeout(function(){l.bind("mouseleave",o),l.width(parseInt(h/4)),l.height(parseInt(i/4)),m.css("left",parseInt(h/4-h)),l.html(l.html()),m=_jq("#"+f+"Obj")},800)};l.bind("mouseleave",o),l.bind("mouseenter",n)}l.css({zIndex:x5engine.settings.zIndex.splashBox})},imSetSize:function(a,b,c){b==0?(c&&_jq("#"+a).html(_jq("#"+a).html()),_jq("#"+a).width(parseInt(x5engine.imAdv.width/4)),_jq("#"+a).height(parseInt(x5engine.imAdv.height/4)),_jq("#"+a+"Obj").css("left",parseInt(x5engine.imAdv.width/4-x5engine.imAdv.width))):(_jq("#"+a).width(x5engine.imAdv.width),_jq("#"+a).height(x5engine.imAdv.height),_jq("#"+a+"Obj").css("left",0))}}}),_jq.extend(x5engine,{imAlertBox:function(a){a=a||{},a.link=a.link||x5engine.settings.imAlertBox.link,a.cookie==null&&(a.cookie=x5engine.settings.imAlertBox.cookie),a.position=a.position||x5engine.settings.imAlertBox.position,a.image=a.image||x5engine.settings.imAlertBox.image,a.sound=a.sound||x5engine.settings.imAlertBox.sound;var b="imAlertBox",c='<div id="'+b+'"><div style="text-align: center; overflow: hidden;" class="imgContainer"><a href="'+a.link+'"><img class="imAdvTarget"/></a></div><div class="closeAlBox"><img src="res/imClose.png" style="width: 20px;" /></div></div>',d=function(){_jq("#"+b+"_fake").height(_jq("#"+b).outerHeight())};a.position=a.position||x5engine.settings.imAlertBox.position,a.sound=a.sound||x5engine.settings.imAlertBox.sound,a.image=a.image||x5engine.settings.imAlertBox.image;if(a.cookie&&_jq.imCookie("im_alert")=="true"&&x5engine.utils.isOnline())return!1;if(a.position=="top"){_jq("body").prepend(c);var e=_jq("#"+b);if(e!=null){e.slideUp(0),e.addClass("alertBox");var f=function(){x5engine.utils.imSoundLink.Stop(),e.slideUp(500,function(){e.remove()}),_jq("#"+b+"_fake").slideUp(500)};_jq("#"+b+" img.imAdvTarget").load(function(){_jq("body").prepend('<div id="'+b+'_fake"></div>'),d(),_jq("#"+b+"_fake").slideUp(0),_jq("#"+b+"_fake").css({position:"relative",right:0,left:0,top:0}),_jq(this).unbind("load"),_jq("#"+b).css({position:"absolute",right:0,left:0,top:0,zIndex:x5engine.settings.zIndex.splashBox,"border-top-width":0}),a.sound!=""&&a.sound!=null&&x5engine.utils.imSoundLink.Play(a.sound),_jq("#"+b+"_fake").slideDown(500),e.slideDown(500),a.cookie&&_jq.imCookie("im_alert","true",{expires:0,path:"/"})}),_jq("#"+b+" img.imAdvTarget").mouseenter(function(){_jq("#"+b+" img.imAdvTarget").attr("src",a.image),_jq("#"+b+" img.imAdvTarget").mouseleave(function(){_jq("#"+b+" img.imAdvTarget").attr("src",a.image),_jq("#"+b+" img.imAdvTarget").unbind("mouseleave")})}),_jq("#"+b+" img.imAdvTarget").attr("src",a.image),_jq(".closeAlBox").click(f),a.callback!=null&&(_jq("#"+b+" .boxText").css("cursor","pointer"),_jq("#"+b+" .boxText").click(a.callback)),_jq(window).unbind("resize",d).resize(d)}}else{_jq("body").append(c);var e=_jq("#imAlertBox");if(e!=null){e.addClass("alertBox"),e.css({position:"fixed",bottom:-1e3,left:0,right:0,zIndex:x5engine.settings.zIndex.splashBox+1});var f=function(){x5engine.utils.imSoundLink.Stop(),e.animate({bottom:-_jq("#"+b+" img").outerHeight(),height:_jq("#"+b+" img").outerHeight()},{duration:500,complete:function(){e.remove()}})},g=function(){_jq("#"+b+" img.imAdvTarget").unbind("load"),_jq("#"+b+" img.imAdvTarget").load(function(){_jq("#"+b+" .imgContainer").animate({height:_jq("#"+b+" img.imAdvTarget").outerHeight()}),e.animate({height:_jq("#"+b+" img.imAdvTarget").outerHeight()}),_jq("#"+b+" img.imAdvTarget").mouseleave(h)}),_jq("#"+b+" img.imAdvTarget").attr("src",a.img_big)},h=function(){_jq("#"+b+" img.imAdvTarget").unbind("load"),_jq("#"+b+" img.imAdvTarget").attr("src",a.image),_jq("#"+b+" .imgContainer").animate({height:_jq("#"+b+" img.imAdvTarget").outerHeight()}),e.animate({height:_jq("#"+b+" img.imAdvTarget").outerHeight()}),_jq("#"+b+" img.imAdvTarget").unbind("mouseleave")};_jq("#"+b+" img.imAdvTarget").load(function(){_jq(this).unbind("load"),a.sound!=""&&a.sound!=null&&x5engine.utils.imSoundLink.Play(a.sound),e.css({bottom:-_jq("#"+b+" img").outerHeight(),"border-bottom-width":0}),_jq("#"+b+" .imgContainer").css({height:_jq("#"+b+" img.imAdvTarget").outerHeight()}),e.stop(!0,!0),e.animate({bottom:0,height:_jq("#"+b+" img.imAdvTarget").outerHeight()},{duration:500}),a.cookie&&_jq.imCookie("im_alert","true",{expires:0})}),a.img_big!=""&&_jq("#"+b+" img.imAdvTarget").mouseenter(g),_jq("#"+b+" img.imAdvTarget").attr("src",a.image),_jq(".closeAlBox").click(f),a.callback!=null&&(_jq("#"+b+" .boxText").css("cursor","pointer"),_jq("#"+b+" .boxText").click(a.callback))}}}}),_jq.extend(x5engine,{imBgStretch:function(a,b){b==null&&(b=!0);var c=null,d=null,e=_jq(window),f=function(){d==null&&(d=i.width()/i.height());var a=e.width()/e.height(),b,c,f,g;b=e.width(),c=e.width()/d,c<e.height()&&(c=e.height(),b=e.height()*d),f=(e.height()-c)/2,g=(e.width()-b)/2,h.css({width:b,height:c,top:0,left:g}),i.css({width:b,height:c})};_jq(".imBgStretcher").remove();var g='<div class="imBgStretcher"><img /></div><div class="imBgStretcher imBgWrap">&nbsp;</div>';_jq("body").prepend(g);var h=_jq(".imBgStretcher"),i=_jq(".imBgStretcher img");h.css({position:"fixed",top:0,left:0,zIndex:0,overflow:"hidden",backgroundColor:"transparent"}),_jq(".imBgWrap").css("z-index",0),_jq("#imFooterBg").css({position:"relative"}),i.load(f),e.resize(function(){b?f():(c!=null&&clearTimeout(c),c=setTimeout(f,100))}),i.attr("src",a)}}),_jq.extend(x5engine,{imBlog:{separator:'<div class="imBlogSeparator"></div>\n',showPost:function(a,b,c){var d="";b=b||0,c=c||0;var e=x5engine.settings.imBlog.posts[a];if(e===null||e===undefined)return;d+='<h2 id="imPgTitle" style="display: block;">'+e.title+"</h2>",d+='<div class="imBreadcrumb" style="display: block;">'+x5engine.l10n.getLocalization("blog_published_by")+"<strong> "+e.author+" </strong>",d+=x5engine.l10n.getLocalization("blog_in")+' <a href="?category='+e.category.replace(/[\s]{1}/g,"_")+'">'+e.category+"</a> &#149; "+e.timestamp,e.media!==null&&e.media!==undefined&&(d+=' &#149; <a href="'+e.media+'">Download '+e.media.substring(e.media.lastIndexOf("/"))+"</a>");if(e.tag.length>0){d+="<br />Tags: ";for(var f=0;f<e.tag.length;f++)d+='<a href="?tag='+e.tag[f]+'">'+e.tag[f]+"</a>,&nbsp;"}d+="</div>";if(b!==0||c!==0){d+='<div class="imBlogPostBody">',e.mediahtml!==null&&e.mediahtml!==undefined&&(d+=e.mediahtml),d+=e.body;if(e.sources.length>0){d+='<div class="imBlogSources">',d+="<b>"+x5engine.l10n.getLocalization("blog_sources")+":</b><br />",d+="<ul>";for(var g=0;g<e.sources.length;g++)d+="<li>"+e.sources[g]+"</li>";d+="</ul></div>"}d+=(x5engine.settings.imBlog.addThis!==null&&x5engine.settings.imBlog.addThis!==undefined?"<br />"+x5engine.settings.imBlog.addThis:"")+"<br /><br /></div>"}else d+='<div class="imBlogPostSummary">'+e.summary+"</div>";return b===0&&(d+='<div class="imBlogPostRead"><a class="imCssLink" href="?id='+a+'">'+x5engine.l10n.getLocalization("blog_read_all")+" &#187;</a></div>"),b!==0&&x5engine.settings.imBlog.comments&&(d+='<div class="imBlogPostComments">',d+='<div class="imBlogCommentsCount">'+x5engine.l10n.getLocalization("blog_no_comment")+"</div>",d+='<div class="imBlogCommentsForm" style="width: 300px;">',d+='<form id="blogComment" action="#">',d+='<div class="imBlogCommentRow">',d+='<label for="form_name" style="float: left;">'+x5engine.l10n.getLocalization("blog_name")+'*</label> <input type="text" id="form_name" name="name" class="imfield mandatory" style="float: right;" />',d+="</div>",d+='<div class="imBlogCommentRow">',d+='<label for="form_email" style="float: left;">'+x5engine.l10n.getLocalization("blog_email")+'*</label> <input type="text" id="form_email" name="email" class="imfield mandatory valEmail" style="float: right;" />',d+="</div>",d+='<div class="imBlogCommentRow">',d+='<label for="form_url" style="float: left;">'+x5engine.l10n.getLocalization("blog_website")+'</label> <input type="text" id="form_url" name="url" style="float: right;" class="imfield" />',d+="</div>",d+='<div class="imBlogCommentRow">',d+='<label for="form_body" style="clear: both;">'+x5engine.l10n.getLocalization("blog_message")+'*</label><textarea id="form_body" name="body" class="imfield mandatory" style="width: 100%; height: 100px;"></textarea>',d+="</div>",x5engine.settings.imBlog.captcha&&(d+='<div class="imBlogCommentRow" style="text-align: center">',d+='<label for="imCpt" style="float: left;">'+x5engine.l10n.getLocalization("form_captcha_title")+'</label>&nbsp;<input type="text" id="imCpt" name="imCpt" class="imfield imCpt[5,../]" size="5" style="width: 120px; margin: 0 auto;" />',d+="</div>"),d+='<div class="imBlogCommentRow" style="text-align: center; margin-bottom: 15px;"><input type="button" value="'+x5engine.l10n.getLocalization("blog_send")+'" class="imBlogCommentSubmitBtn" onclick="x5engine.imBlog.offlineCheck()"/></div>',d+="</form>",d+="</div>",d+="</div>"),d},offlineCheck:function(){x5engine.imForm.validate("#blogComment",{type:"tip",showAll:!0})&&x5engine.utils.showOfflineMessage(x5engine.l10n.getLocalization("blog_offline_message"))},showCategory:function(a){var b="";bps=x5engine.settings.imBlog.posts_cat[a];if(bps===null)return;if(bps.length>0)for(var c=0;c<bps.length;c++)b+=x5engine.imBlog.showPost(bps[c],0,c==bps.length-1?1:0),c>0&&(b+=x5engine.imBlog.separator);else b+='<div class="imBlogEmpty">Empty category</div>';return b},showMonth:function(a){var b="";bps=x5engine.settings.imBlog.posts_month[a];if(bps===null)return;if(bps.length>0)for(var c=0;c<bps.length;c++)b+=x5engine.imBlog.showPost(bps[c],0,c==bps.length-1?1:0),c>0&&(b+=x5engine.imBlog.separator);else b+='<div class="imBlogEmpty">Empty month</div>';return b},showSearch:function(a){var b="",c=x5engine.settings.imBlog.posts_ids,d=0;if(c===null)return;if(c.length>0){for(var e=0;e<c.length;e++)if(x5engine.settings.imBlog.posts[c[e]].title.indexOf(a)!=-1||x5engine.settings.imBlog.posts[c[e]].summary.indexOf(a)!=-1||x5engine.settings.imBlog.posts[c[e]].body.indexOf(a)!=-1)b+=x5engine.imBlog.showPost(c[e],0,d==c.length-1?1:0),d++,e>0&&(b+=x5engine.imBlog.separator);d===0&&(b+='<div class="imBlogEmpty">Empty search</div>')}else b+='<div class="imBlogEmpty">Empty blog</div>';return b},showLast:function(a){var b=x5engine.settings.imBlog.posts_ids,c="";if(b===null)return;if(b.length>0){var d=b.length<a?b.length:a;for(var e=0;e<d;e++)c+=x5engine.imBlog.showPost(b[e],0,e===0?1:0),e>0&&(c+=x5engine.imBlog.separator)}else c+='<div class="imBlogEmpty">Empty blog</div>';return c},showTag:function(a){var b=x5engine.settings.imBlog.posts_ids,c="";if(b===null)return;if(b.length>0)for(var d=0;d<b.length;d++){var e=x5engine.settings.imBlog.posts[b[d]].tag,f=!1;for(var g=0;g<e.length;g++)e[g]==a&&(f=!0);f&&(c+=x5engine.imBlog.showPost(b[d],0,d==b.length-1?1:0),d>0&&(c+=x5engine.imBlog.separator))}else c+='<div class="imBlogEmpty">Empty blog</div>';return c},show:function(){x5engine.utils.isOnline()||(x5engine.utils.getParam("id")!==null?_jq("#imBlogContent").empty().append(x5engine.imBlog.showPost(x5engine.utils.getParam("id"),1)):x5engine.utils.getParam("category")!==null?_jq("#imBlogContent").empty().append(x5engine.imBlog.showCategory(x5engine.utils.getParam("category"))):x5engine.utils.getParam("tag")!==null?_jq("#imBlogContent").empty().append(x5engine.imBlog.showTag(x5engine.utils.getParam("tag"))):x5engine.utils.getParam("month")!==null?_jq("#imBlogContent").empty().append(x5engine.imBlog.showMonth(x5engine.utils.getParam("month"))):x5engine.utils.getParam("search")!==null?_jq("#imBlogContent").empty().append(x5engine.imBlog.showSearch(x5engine.utils.getParam("search"))):_jq("#imBlogContent").empty().append(x5engine.imBlog.showLast(10)),_jq("#imContent").change())}}}),_jq.extend(x5engine,{imCart:{products:{},html_form:"",payments:[],shippings:[],settings:{vat:0,vatincluded:!1,currency:"€",currency_id:"EUR",currency_format:"#.###,@@[C]",post_url:"x5cart.php",order_no_format:"[yy][mm][dd]-[A-Z][A-Z][0-9][0-9]",form_autocomplete:!0,form_validation:"tip",continue_shopping_page:"index.html",remove_from_cart_icon:"cart/images/cart-remove.gif",add_to_cart_icon:"cart/images/cart-add.gif",currencies:["USD","EUR"],cart_price:{multiplier:1,format:"#.@"}},costants:{QUANT_FIELD_NAME:"product_{id}_qty",OPT_FIELD_NAME:"product_{id}_opt",COOKIE_NAME:"imCart",COOKIE_FORM_NAME:"imCartFormData",WIDGET_NAME:"imCartWidget",PAYMENT_COOKIE_NAME:"imCartPaymentType",SHIPPING_COOKIE_NAME:"imCartShippingType"},payment_type:null,shipping_type:null,email_data:null,product_price_plus_vat:0,total_price:0,setupProductList:function(){_jq(".imProductListText").each(function(){if(!_jq(this).hasClass("imTypeImage")){var a=_jq(this);a.find(".imProductListBuyBox").css({height:"auto"}),a.find(".imProductListFooter").css({height:"auto"});var b=function(){var b=a.find(".imProductListFooter select").outerHeight()+a.find(".imProductListBuyBox").outerHeight(),c=a.innerHeight()-b-20;a.find(".imProductListFooter").css({height:b+10}),a.find(".imProductListDescription").css({height:c})};b(),a.find("img").load(function(){_jq(this).unbind("load"),b()})}else{if(/MSIE/.test(navigator.userAgent)){var c=0;_jq(this).parent().find(".imProductListBoxAdd img").each(function(){c+=_jq(this).width()+5}),c+=_jq(this).parent().find(".imProductListQuantity").width()+5,_jq(this).parent().find(".imProductListBoxAdd").css({width:c})}var d=_jq(this).parent().find(".imProductListImage img"),e=_jq(this).parent().find(".imProductListImage"),f=_jq(this).parent().innerHeight()-_jq(this).find(".imProductListBuyBox").outerHeight();f<d.height()&&(d.width(Math.floor(f/d.height()*d.width())),d.height(f),e.height(f),d.css({marginTop:0}),_jq(this).find(".imProductListBuyBox").css({position:"relative",top:0,bottom:0,margin:0,padding:0,clear:"both"}))}})}}}),_jq.imCookie=function(a,b,c){if(b==null){var i=null;if(document.cookie&&document.cookie!==""){var j=document.cookie.split(";");for(var k=0;k<j.length;k++){var l=_jq.trim(j[k]);if(l.substring(0,a.length+1)==a+"="){i=decodeURIComponent(l.substring(a.length+1));break}}}return i}c=c||{},c.expires==null&&(c.expires=60),b===null&&(b="",c.expires=-1);var d="";if(c.expires&&(typeof c.expires=="number"||c.expires.toUTCString)){var e;typeof c.expires=="number"?(e=new Date,e.setTime(e.getTime()+c.expires*24*60*60*1e3)):e=c.expires,d="; expires="+e.toUTCString()}var f=c.path?"; path="+c.path:"",g=c.domain?"; domain="+c.domain:";",h=c.secure?"; secure":"";document.cookie=[a,"=",encodeURIComponent(b),d,f,g,h].join("")},_jq.extend(x5engine,{imDate:function(a,b,c){b=b||x5engine.l10n.getLocalization("date_days"),c=c||x5engine.l10n.getLocalization("date_months");var d=x5engine.l10n.getLocalization("date_full_months"),e=x5engine.l10n.getLocalization("date_full_days"),f=x5engine.l10n.getLocalization("date_format"),g=new Date,h=g.getFullYear().toString(),i=x5engine.utils.imFormatInt(parseInt(g.getDate(),10)),j=x5engine.utils.imFormatInt(parseInt(g.getMonth(),10)+1),k="";try{k=f.replace(/\[yyyy\]/g,h),k=k.replace(/\[yy\]/g,h.substring(2)),k=k.replace(/\[aaaa\]/g,h),k=k.replace(/\[aa\]/g,h.substring(2)),k=k.replace(/\[mm\]/g,j),k=k.replace(/\[dd\]/g,i),k=k.replace(/\[D\]/g,parseInt(g.getDay(),10)-1>=0?b[parseInt(g.getDay(),10)-1]:b[6]),k=k.replace(/\[DD\]/g,parseInt(g.getDay(),10)-1>=0?e[parseInt(g.getDay(),10)-1]:e[6]),k=k.replace(/\[M\]/g,c[parseInt(g.getMonth(),10)]),k=k.replace(/\[MM\]/g,d[parseInt(g.getMonth(),10)])}catch(l){}_jq(a).empty().append(k),setTimeout("x5engine.imDate('"+a+"')",6e4)}}),_jq.extend(x5engine,{imDatePicker:function(a,b){var c,d=x5engine.l10n.getLocalization("date_months"),e=x5engine.l10n.getLocalization("date_full_months"),f=x5engine.l10n.getLocalization("date_days"),g=x5engine.l10n.getLocalization("date_full_days"),h=function(a,b){var c=[],d=!1,e=0;while(!d&&e<b.length)a.indexOf(b.charAt(e))!=-1&&(d=!0),e++;if(!d||b.length==0)return[a];var f=a.split(b.charAt(0));for(var e=0;e<f.length;e++)c=c.concat(h(f[e],b.substring(1)));return c},i=function(){var c=_jq(a).val(),d=b.format;if(c!=""){format=d,format=format.replace(/\//g,"\\/"),format=format.replace(/\s/g,"\\s+"),format=format.replace(/\-/g,"\\-"),format=format.replace(/\./g,"\\."),format=format.replace(/\[dd\]/g,"\\d{1,2}"),format=format.replace(/\[mm\]/g,"\\d{1,2}"),format=format.replace(/\[yy\]/g,"\\d{2}"),format=format.replace(/\[yyyy\]/g,"\\d{4}"),format=format.replace(/\[DD\]/g,"[\\wìòàùèé']+"),format=format.replace(/\[MM\]/g,"[\\wìòàùèé']+"),format=format.replace(/\[D\]/g,"[\\wìòàùèé']+"),format=format.replace(/\[M\]/g,"[\\wìòàùèé']+"),format="^"+format+"$";var e=new RegExp(format);if(!e.test(c))return!1;d=d.replace("[M]",""),d=d.replace("[D]",""),d=d.replace("[MM]",""),d=d.replace("[DD]",""),d=d.replace("[yy]",""),d=d.replace("[yyyy]",""),d=d.replace("[mm]",""),d=d.replace("[dd]","");var f=h(b.format,d),g=h(c,d),i="",j="",k="";for(var l=0;l<f.length;l++)switch(f[l]){case"[M]":var m=x5engine.l10n.getLocalization("date_months");for(var n=0;n<m.length;n++)m[n].toLowerCase()==g[l].toLowerCase()&&(i=n+1);break;case"[MM]":var m=x5engine.l10n.getLocalization("date_full_months");for(var n=0;n<m.length;n++)m[n].toLowerCase()==g[l].toLowerCase()&&(i=n+1);break;case"[D]":var m=x5engine.l10n.getLocalization("date_days");for(var n=0;n<m.length;n++)m[n].toLowerCase()==g[l].toLowerCase()&&(j=n+1);break;case"[DD]":var m=x5engine.l10n.getLocalization("date_full_days");for(var n=0;n<m.length;n++)m[n].toLowerCase()==g[l].toLowerCase()&&(j=n+1);break;case"[yy]":k="20"+g[l];break;case"[yyyy]":k=g[l];break;case"[mm]":i=g[l];break;case"[dd]":j=g[l]}return new Date(k,i-1,j)}return!1},j=function(){var a="<table>",d;a+="<tr>";for(var e=0;e<f.length;e++)d=e+b.start,d>6&&(d-=7),a+='<td class="imDPhead">'+f[d]+"</td>";a+="</tr>";var g=new Date(b.date.getYear(),b.date.getMonth(),b.date.getDate());g.setFullYear(b.date.getFullYear()),g.setDate(1);var h=parseInt(g.getDay(),10);h-=b.start,h<=0&&(h+=7);var i=parseInt(g.getMonth(),10),j=0;while(g.getMonth()==i){a+="<tr>";for(var e=1;e<=7;e++){var k="day";if(e+7*j>=h&&g.getMonth()==i){var l=e-h+1+7*j;l==c.getDate()&&g.getMonth()==c.getMonth()&&(k+=" selDay"),a+='<td class="'+k+'">'+l+"</td>",g.setDate(g.getDate()+1)}else a+="<td></td>"}a+="</tr>",j++}return a+="</table>",a},k=function(h,i){i==null||i==0?(b.date.setDate(_jq(this).html()),c.setFullYear(b.date.getFullYear()),c.setMonth(b.date.getMonth()),c.setDate(_jq(this).html())):(b.date.setFullYear(i.getFullYear()),b.date.setMonth(i.getMonth()),b.date.setDate(i.getDate()),c.setFullYear(i.getFullYear()),c.setMonth(i.getMonth()),c.setDate(i.getDate()));var j=b.date.getFullYear().toString(),k=x5engine.utils.imFormatInt(parseInt(b.date.getDate(),10)),l=x5engine.utils.imFormatInt(parseInt(b.date.getMonth(),10)+1),m=b.format.replace(/\[yyyy\]/g,j);m=m.replace(/\[yy\]/g,j.substring(2)),m=m.replace(/\[mm\]/g,l),m=m.replace(/\[dd\]/g,k),m=m.replace(/\[D\]/g,parseInt(c.getDay(),10)-1>=0?f[parseInt(c.getDay(),10)-1]:f[6]),m=m.replace(/\[DD\]/g,parseInt(c.getDay(),10)-1>=0?g[parseInt(c.getDay(),10)-1]:g[6]),m=m.replace(/\[M\]/g,d[parseInt(c.getMonth(),10)]),m=m.replace(/\[MM\]/g,e[parseInt(c.getMonth(),10)]),_jq(a).attr("value",m),p()},l=function(){b.date.setMonth(b.date.getMonth()+1),_jq("#imDPcal").empty().append(j()),_jq("#imDPMonth").empty().append(e[parseInt(b.date.getMonth(),10)]+" "+b.date.getFullYear().toString()),_jq(".day").click(k)},m=function(){b.date.setMonth(b.date.getMonth()-1),_jq("#imDPcal").empty().append(j()),_jq("#imDPMonth").empty().append(e[parseInt(b.date.getMonth(),10)]+" "+b.date.getFullYear().toString()),_jq(".day").click(k)},n=function(a,d){var f=i();f!=null&&f!=0&&(b.date.setFullYear(f.getFullYear()),b.date.setMonth(f.getMonth()),b.date.setDate(f.getDate()),c.setFullYear(f.getFullYear()),c.setMonth(f.getMonth()),c.setDate(f.getDate()));var g='<div id="imDatePicker">',h=b.vDay,n=b.vMonths;g+='<div id="imDPHead"><span id="imDPleft">&lt;</span><span id="imDPMonth">&nbsp;</span><span id="imDPright">&gt;</span></div>',g+='<div id="imDPcal">'+j()+"</div>",g+="</div>",_jq("body").append('<div id="imDPBG"></div>'),_jq("#imDPBG").css({position:"fixed",width:_jq(window).width(),height:_jq(window).height(),top:0,left:0,zIndex:x5engine.settings.zIndex.datePicker+1}),_jq("#imDPBG").click(p),_jq("body").append(g),b.shadow==1&&(_jq("#imDatePicker").css("box-shadow","0px 0px 3px #000"),_jq("#imDatePicker").css("-webkit-box-shadow","0px 0px 3px #000"),_jq("#imDatePicker").css("-moz-box-shadow","0px 0px 3px #000")),_jq("#imDPMonth").append(e[parseInt(c.getMonth(),10)]+" "+c.getFullYear().toString()),_jq("#imDPleft").click(m),_jq("#imDPright").click(l),_jq(".day").click(k),a+_jq("#imDatePicker").width()>_jq(window).width()+_jq(window).scrollLeft()&&(a=_jq(window).width()-_jq("#imDatePicker").outerWidth()-5+_jq(window).scrollLeft()),d+_jq("#imDatePicker").height()>_jq(window).height()+_jq(window).scrollTop()&&(d=_jq(window).height()-_jq("#imDatePicker").outerHeight()-5+_jq(window).scrollTop()),_jq("#imDatePicker").fadeOut(0),_jq("#imDatePicker").css({top:d,left:a}),/IE 7/.test(navigator.userAgent)||(_jq("#imDatePicker").css("-moz-border-radius","5px"),_jq("#imDatePicker").css("-webkit-border-radius","5px"),_jq("#imDatePicker").css("border-radius","5px"),_jq("#imDatePicker #imDPHead").css("-moz-border-radius","5px"),_jq("#imDatePicker #imDPHead").css("-webkit-border-radius","5px"),_jq("#imDatePicker #imDPHead").css("border-radius","5px"),_jq("#imDatePicker #imDPHead").css("background","-webkit-gradient( linear, left bottom, left top, color-stop(0, rgb(255,255,255)), color-stop(1, rgb(193,203,213)))"),_jq("#imDatePicker #imDPHead").css("background","-moz-linear-gradient( center bottom, rgb(255,255,255) 0%, rgb(193,203,213) 100%"),_jq("#imDatePicker .day").css("background","-webkit-gradient( linear, left bottom, left top, color-stop(0, rgb(245,245,245)), color-stop(1, rgb(255,255,255)))"),_jq("#imDatePicker .day").css("background","-moz-linear-gradient( center bottom, rgb(245,245,245) 0%, rgb(255,255,255) 100%)"),_jq("#imDatePicker .selDay").css("background","-webkit-gradient( linear, left bottom, left top, color-stop(0, rgb(255,240,128)), color-stop(1, rgb(255,255,255)))"),_jq("#imDatePicker .selDay").css("background","-moz-linear-gradient( center bottom, rgb(255,240,128) 0%, rgb(255,255,255) 100% )")),_jq("#imDatePicker").css({zIndex:x5engine.settings.zIndex.datePicker+2}).fadeIn(200)},o=function(a){_jq("#imDatePicker").length>0?_jq("#imDatePicker").fadeOut(200,function(){_jq("#imDatePicker").remove(),n(a.pageX,a.pageY)}):n(a.pageX,a.pageY)},p=function(){_jq("#imDPBG").remove(),_jq("#imDatePicker").fadeOut(200,function(){_jq("#imDatePicker").remove()})};b=b||{},b.icon==null&&(b.icon=!0),b.start=b.start||0,b.shadow==null&&(b.shadow=!0),b.start<0&&(b.start+=7),b.format=b.format||x5engine.l10n.getLocalization("date_format"),b.date==null||b.date==""||b.date=="undefined"?b.date=new Date:b.date=new Date(b.date.substring(6),parseInt(b.date.substring(3,5),10)-1,b.date.substring(0,2)),c=new Date(b.date.getFullYear(),b.date.getMonth(),b.date.getDate());if(b.icon){var q=document.createElement("span");q=_jq(q),_jq(a).after(q),q.empty().append('<img src="res/date.gif" style="cursor: pointer;" class="imDatePickerIcon"/>'),q.find("img").css({marginTop:Math.floor(q.prev("input").outerHeight()-15)/2+1}),q.click(o)}else _jq(a).click(o);_jq(a).bind("change",function(){var a=i();a!=0&&k(null,a)}),_jq(a).click(function(){_jq(this).removeClass(x5engine.imForm.constants.mark)})}}),_jq.extend(x5engine,{imForm:{constants:{mark:"imFormMark"},initForm:function(a,b,c){b=b||!1,c==null&&(c={base:""}),_jq(a).find("label").wrapInner("<span>"),_jq(a).append('<input type="hidden" value="jsactive" name="imJsCheck" />'),_jq(a).find("img").each(function(){_jq(this).bind("mouseover",function(){x5engine.imTip.Show(_jq(this),{position:"top"})})}),b&&_jq(a).find(":input").each(function(){_jq("#"+_jq(this).attr("id")+"_tip").length>0&&_jq(this).bind("focus click",function(){_jq(this).one("blur",function(){_jq("#"+_jq(this).attr("id")+"_tip").triggerHandler("mouseout")})})}),_jq(a).find("[class*=datePicker]").each(function(){_jq(this).attr("class").match(/datePicker\[(.*),([\d]{1})\]/),RegExp.$1!=""&&RegExp.$2!=""&&x5engine.imDatePicker(_jq(this),{format:RegExp.$1.toString(),icon:parseInt(RegExp.$2)==1?!0:!1})}),_jq("[class*=valMaxLength], [class*=valLength]").each(function(){_jq(this).attr("class").match(/Length\[([0-9]+)\]/g);var a=RegExp.$1;_jq(this).keyup(function(){_jq(this).val(_jq(this).val().substring(0,a))})}),_jq("[class*=valNumber]").keypress(function(a){var b=a.charCode?a.charCode:a.keyCode;return b==8||b==37||b==39||b==46?!0:/^[0-9]+$/g.test(_jq(this).val()+String.fromCharCode(b))}),_jq("[class*=valDate]").keypress(function(a){var b=a.charCode?a.charCode:a.keyCode;return b==8||b==37||b==39||b==46?!0:/^[0-9\/\.]+$/g.test(_jq(this).val()+String.fromCharCode(b))}),_jq("[class*=valTelephone]").keypress(function(a){var b=a.charCode?a.charCode:a.keyCode;return b==8||b==37||b==39||b==46?!0:/^[0-9\s\-\(\)]+$/g.test(_jq(this).val()+String.fromCharCode(b))}),x5engine.imForm.showFiles(a),x5engine.imForm.setPagination(a,c),x5engine.imForm.lockCopyPaste(a),x5engine.utils.switchFocus(a),x5engine.imForm.showCaptcha(a),x5engine.imForm.setLabels(a,c);if(/Chrome/.test(navigator.userAgent)||/MSIE 8/.test(navigator.userAgent)||/MSIE 9/.test(navigator.userAgent)||/MSIE 10/.test(navigator.userAgent)){var d={"padding-left":7,"padding-right":7};_jq(a).find("input[type=button], input[type=submit], input[type=reset]").css(d)}else if(/Firefox/.test(navigator.userAgent)){var d={"padding-left":4,"padding-right":4,"padding-bottom":_jq(a).find(".imFormButtonWrapper").length>0?4:2};_jq(a).find("input[type=button], input[type=submit], input[type=reset]").css(d)}_jq(a).find("input[type=reset]").click(function(){return _jq("[tiptarget]").remove(),_jq(a).find("."+x5engine.imForm.constants.mark).removeClass(x5engine.imForm.constants.mark),_jq(a).find("."+x5engine.imTip.constants.locked).removeClass(x5engine.imTip.constants.locked),_jq(a).find("[class*=datePicker]").val("").attr("value",""),!0})},showFiles:function(a){/Chrome/.test(navigator.userAgent)&&_jq("input[type=file]").css({height:_jq(a).find("input[type=text]").innerHeight(),padding:0})},setLabels:function(a,b){_jq(a).find("input, textarea").not(":submit, :radio, :reset, :hidden, :button").each(function(){if(_jq(this).val()!=""&&_jq(this).prop("readonly")!=1){var c,d,e=_jq(this);b=b||{},e.data("label",_jq(this).val()),b.labelColor!=null&&e.css({color:b.labelColor}),e.is("input[type=password]")&&(c=e.attr("id")+"_fake",e.data("password",!0),e.after('<input type="text" class="'+e.attr("class").replace(/mandatory/g,"").replace(/equalTo\[[^\]]+\]/g,"")+'" style="'+e.attr("style")+'" value="'+e.data("label")+'" id="'+c+'"/>').fadeOut(0),d=_jq("#"+c),e.attr("value",""),d.focus(function(){d.fadeOut(0),e.fadeIn(0),e.focus()}),_jq(a).find("input[type=reset]").click(function(){e.fadeOut(0),d.fadeIn(0),setTimeout(function(){e.attr("value","")},500)})),e.focus(function(){e.data("password")&&d.fadeOut(0),e.val()==_jq(this).data("label")&&(e.val(""),e.css({color:b.fieldColor}))}),e.blur(function(){e.val()==""&&(e.data("password")&&(e.fadeOut(0),d.fadeIn(0)),e.val(e.data("label")),e.css({color:b.labelColor}))})}})},showCaptcha:function(a){var b="",c,d;_jq(a).find("[class*=imCpt]").not("iframe").each(function(){_jq(this).val("");var e="";if(/imCpt\[([0-9]+)\]/.test(_jq(this).attr("class"))){_jq(this).attr("class").match(/imCpt\[([0-9]+)\]/);var f=RegExp.$1||5;f>9&&(f=9)}else{_jq(this).attr("class").match(/imCpt\[([0-9]+),\s*([^\]]+)\]/);var f=RegExp.$1||5;f>9&&(f=9);var e=RegExp.$2||""}var g=_jq(this).attr("class").match(/imCpt\[\]/);for(c=0;c<f;c++){do d=parseInt(Math.random()*9);while(b.indexOf(d)>-1);b+=d}_jq("#"+_jq(this).attr("id")+"_imCptHdn").remove();if(x5engine.utils.isOnline())_jq(".imFrame\\["+_jq(this).attr("id")+"\\]").remove(),_jq(this).before('<iframe style="display: block; margin: 3px auto 2px auto; width: 120px; height: 24px; border: 1px solid #BBBBBB" class="imFrame['+_jq(this).attr("id")+']" src="'+e+"captcha/imcaptcha.php?action=show&code="+b+'" frameborder="0" marginwidth="0" marginheight="0" width="120" height="24" scrolling="no"></iframe><input type="hidden" value="'+b+'" name="imCptHdn" id="'+_jq(this).attr("id")+'_imCptHdn"/>');else{_jq("#"+_jq(this).attr("id")+"_fakediv").remove();var h='<div id="'+_jq(this).attr("id")+'_fakediv" style="font-size: 8pt; font-family: Tahoma; margin: 3px auto 2px auto; width: 120px; height: 24px; border: 1px solid #BBBBBB">';for(c=0;c<b.length;c++)h+='<img src="'+e+x5engine.settings.imCaptcha.offlineCodes[parseInt(b.charAt(c))].path+'" />';h+="</div>",h+='<input type="hidden" value="';for(c=0;c<b.length;c++)h+=x5engine.settings.imCaptcha.offlineCodes[parseInt(b.charAt(c))].letter;h+='" name="imCptHdn" id="'+_jq(this).attr("id")+'_imCptHdn"/>',_jq(this).before(h)}_jq("#imContent").change(),_jq(a).find("input[type=reset]").click(function(){x5engine.imForm.showCaptcha(_jq(a))})})},checkCaptcha:function(a){var b=a.prev("#"+a.attr("id")+"_imCptHdn").val(),c=a.val(),d="",e="",f=!1;return/imCpt\[([0-9]+),\s*([^\]]+)\]/.test(a.attr("class"))&&(a.attr("class").match(/imCpt\[([0-9]+),\s*([^\]]+)\]/),e=RegExp.$2||""),x5engine.utils.isOnline()?_jq.ajax({url:e+"captcha/imcaptcha.php?action=check&code="+b+"&ans="+c,async:!1,cache:!1,success:function(a){a!="-1"&&(f=!0)}}):c.toLowerCase()==b.toLowerCase()&&(f=!0),f},setPagination:function(a,b){var c=0,d=!1;b=b||{};var e=b.type||"tip";showPage=function(b,c){c=c||400,_jq(a+"_next").attr("disabled",!1),_jq(a+"_prev").attr("disabled",!1),_jq("."+x5engine.imTip.constants.classId).remove(),_jq("."+x5engine.imForm.constants.mark).removeClass(x5engine.imForm.constants.mark),b==1?(_jq(a+"_prev").fadeOut(0),_jq(a+"_next").fadeIn(0),_jq(a+"_submit").fadeOut(0)):_jq(a).find("[pageCount="+(b+1)+"]").length==0?(_jq(a+"_prev").fadeIn(0),_jq(a+"_next").fadeOut(0),_jq(a+"_submit").fadeIn(0)):(_jq(a+"_prev").fadeIn(0),_jq(a+"_next").fadeIn(0)),_jq(a).find("fieldset"
).each(function(){parseInt(_jq(this).attr("pageCount"))==b?_jq(this).children("div").not(".legend").animate({height:"show"},c):_jq(this).children("div").not(".legend").animate({height:"hide"},c)})},showNextPage=function(){var b=parseInt(_jq(a+"_pageCounter").val());x5engine.imForm.validate(_jq("fieldset[pageCount="+b+"]"),{showAll:true,paginate:true,type:e})==1&&(b++,_jq(a).find("[pageCount="+b+"]").length>0?(showPage(b),_jq(a+"_pageCounter").attr("value",b)):_jq(a).submit())},showPrevPage=function(){var b=parseInt(_jq(a+"_pageCounter").val());b--,b>0&&(_jq(a+"_pageCounter").attr("value",b),showPage(b))};var f=function(){_jq(a)[0].reset(),showPage(1)};_jq(a).find("fieldset").each(function(){_jq(this).hasClass("newPage")?(c!=0&&(d=!0),c++):c==0&&c++,_jq(this).attr("pageCount",c)});if(c>1){_jq(a).append('<input type="hidden" name="'+a.replace("#","")+'_pageCounter" id="'+a.replace("#","")+'_pageCounter" value="1" />'),_jq(a).children("div:last").append('<input type="button" id="'+a.replace("#","")+'_prev" value="'+x5engine.l10n.getLocalization("cart_goback")+'"/>'),_jq(a).children("div:last").append('<input type="button" id="'+a.replace("#","")+'_next" value="'+x5engine.l10n.getLocalization("cart_gonext")+'"/>');var g=_jq(a).find("input[type=submit]").attr("value");_jq(a).find("input[type=submit]").remove(),_jq(a).children("div:last").append('<input type="button" id="'+a.replace("#","")+'_submit" value="'+g+'"/>'),g=_jq(a).find("input[type=reset]").attr("value"),_jq(a).find("input[type=reset]").remove(),_jq(a).children("div:last").append('<input type="button" id="'+a.replace("#","")+'_reset" value="'+g+'"/>'),_jq(a).find(a+"_submit").fadeOut(0),_jq(a+"_prev").click(showPrevPage),_jq(a+"_next").click(showNextPage),showPage(1,1)}else{var g=_jq(a).find("input[type=submit]").attr("value");_jq(a).find("input[type=submit]").after('<input type="button" id="'+a.replace("#","")+'_submit" value="'+g+'"/>'),_jq(a).find("input[type=submit]").remove()}_jq(a+"_reset").click(f),_jq(a+"_submit").click(function(){x5engine.imForm.submit(a,b)}),_jq(a).submit(function(){return x5engine.imForm.submit(a,b),!1})},lockCopyPaste:function(a){var b;_jq(a).find("input[class*=equalTo]").each(function(){var a=_jq(this).attr("class").split(" ");for(var b=0;b<a.length;b++)if(a[b].substring(0,7)=="equalTo"){var c=a[b].substring(8,a[b].length-1);_jq("#"+c).bind("contextmenu cut copy paste",function(a){return a.preventDefault(),!1})}}),_jq(a).find("input[class*=equalTo]").bind("contextmenu cut copy paste",function(a){return a.preventDefault(),!1})},validate:function(a,b){var c=!0,d=!1,e;b=b||{};var f,g=_jq(a).attr("id");b==null&&(b={}),b.type=b.type||"tip",b.showAll=b.showAll||!1;if(b.type=="popup"||b.type=="alert")b.showAll=!1;b.paginate=b.paginate||!1,_jq(a).find("*").removeClass(x5engine.imForm.constants.mark);var h=function(a,e){var f=function(){_jq(this).removeClass(x5engine.imForm.constants.mark),_jq("[tiptarget="+_jq(this).attr("id")+"]").remove()},g;_jq(a).is("input[type=radio]")?g=_jq(a).parent().parent().parent().find("label").html():g=_jq("label[for="+_jq(a).attr("id")+"] span").html(),_jq(a).is("input[type=password]")&&!_jq(a).is(":visible")&&(_jq(a).data("label")!=null&&(g=_jq(a).data("label")),a=_jq("#"+_jq(a).attr("id")+"_fake"),_jq(a).unbind("focus",f).focus(f)),_jq(a).addClass(x5engine.imForm.constants.mark),_jq(a).is(":radio")&&_jq(a).css("border","none");if(e!=null&&(!d||b.showAll)){d=!0;var h=x5engine.l10n.getLocalization(e);g==null&&(g=_jq(a).data("label")),g==null&&(g="");if(g!=null){var i=!0;while(g.charAt(g.length-1)==":"||g.charAt(g.length-1)=="*"||g.charAt(g.length-1)==" ")g=g.substr(0,g.length-1);try{h=h.replace(/\[FIELD\]/g,"'"+g+"'")}catch(j){}switch(b.type){case"alert":alert(h);break;case"popup":var k=new x5engine.utils.Gui;k.showPopUp({text:h});break;case"tip":default:var l;_jq(a).attr("class").match(/datePicker\[(.*),([\d]{1})\]/)&&_jq(a).next("span").find("img.imDatePickerIcon").is("img")!=0?l=_jq(a).next("span").find(".imDatePickerIcon"):_jq(a).is("input[type=radio]")?(_jq(a).click(function(){_jq(this).unbind("click"),_jq("[tiptarget="+_jq(this).attr("id").substring(0,_jq(this).attr("id").lastIndexOf("_"))+"_target]").remove(),_jq("label[for="+_jq(a).attr("id").substring(0,_jq(a).attr("id").lastIndexOf("_"))+"] span").removeClass(x5engine.imTip.constants.locked).attr("id","")}),l=_jq(a).parent().parent().parent(),l.attr("id",_jq(a).attr("id").substring(0,_jq(a).attr("id").lastIndexOf("_"))+"_target"),_jq("[tiptarget="+_jq(a).attr("id").substring(0,_jq(a).attr("id").lastIndexOf("_"))+"_target]").length>0&&(l=null)):_jq(a).next("img").is("img")?(i=_jq(a),l=_jq(a).next("img")):_jq(a).nextAll("iframe.imFrame\\["+_jq(a).attr("id")+"\\]").is("iframe")?(i=_jq(a),l=_jq(a).nextAll("iframe.imFrame\\["+_jq(a).attr("id")+"\\]")):l=_jq(a),l!=null&&(l.removeClass(x5engine.imTip.constants.locked),x5engine.imTip.Show(l,{position:"right",text:h,unique:!1,classes:b.classes,persistant:!0,hideOnFocus:i}))}}}c=!1},i=function(a){var b="",c="[]_\\(){}-.+*?";for(var d=0;d<a.length;d++)switch(a.charAt(d)){case"N":b+="[0-9]{1}";break;case"F":b+="[0-9]{0,1}";break;case"A":b+="[a-zA-Z]{1}";break;case"Z":b+="[a-zA-Z]{0,1}";break;default:c.indexOf(a.charAt(d))!=0?b+="\\"+a.charAt(d):b+=a.charAt(d)}return b="^"+b+"$",new RegExp(b)},j=function(){_jq(a).find(".mandatory").not(":checkbox").not(":radio").each(function(){(_jq(this).val()==""||_jq(this).data("label")!=undefined&&_jq(this).val()==_jq(this).data("label"))&&h(this,"form_mandatory")}),_jq(a).find(".mandatory:checkbox").each(function(){this.checked==0&&h(this,"form_mandatory")}),_jq(a).find(".mandatory:radio").each(function(){_jq(".mandatory[name="+_jq(this).attr("name")+"]:checked").length==0&&h(this,"form_mandatory")}),_jq(a).find("[class*=equalTo]").each(function(){if(_jq(this).data("label")!=undefined&&_jq(this).val()==_jq(this).data("label"))return;var a=_jq(this).attr("class").split(" ");for(var b=0;b<a.length;b++)if(a[b].substring(0,7)=="equalTo"){var c=a[b].substring(8,a[b].length-1);_jq(this).val()!=_jq("[name="+c+"]").val()&&h(this,"form_equal")}}),_jq(a).find("[class*=valMinLength]").each(function(){if(_jq(this).data("label")!=undefined&&_jq(this).val()==_jq(this).data("label"))return;var a=_jq(this).attr("class").split(" ");for(var b=0;b<a.length;b++)if(a[b].substring(0,12)=="valMinLength"){var c=parseInt(a[b].substring(13,a[b].length-1));_jq(this).val().length<c&&h(this,"form_length")}}),_jq(a).find("[class*=valLength]").each(function(){if(_jq(this).data("label")!=undefined&&_jq(this).val()==_jq(this).data("label"))return;var a=_jq(this).attr("class").split(" ");for(var b=0;b<a.length;b++)if(a[b].substring(0,9)=="valLength"){var c=parseInt(a[b].substring(10,a[b].length-1));_jq(this).val().length!=c&&h(this,"form_length")}}),_jq(a).find(".valNumber").each(function(){if(_jq(this).data("label")!=undefined&&_jq(this).val()==_jq(this).data("label"))return;_jq(this).val()!=""&&/^\d*$/.test(_jq(this).val())==0&&h(this,"form_numbers")}),_jq(a).find(".valChars").each(function(){if(_jq(this).data("label")!=undefined&&_jq(this).val()==_jq(this).data("label"))return;_jq(this).val()!=""&&/^\D*$/.test(_jq(this).val())==0&&h(this,"form_characters")}),_jq(a).find(".valGenTelephone").each(function(){if(_jq(this).data("label")!=undefined&&_jq(this).val()==_jq(this).data("label"))return;_jq(this).val()!=""&&/^[0-9\-\.\/\(\)\s]*$/.test(_jq(this).val())==0&&h(this,"form_telephone")}),_jq(a).find(".valTelephone").each(function(){if(_jq(this).data("label")!=undefined&&_jq(this).val()==_jq(this).data("label"))return;_jq(this).val()!=""&&/^[0-9 \-\.\/]*$/.test(_jq(this).val())==0&&h(this,"form_telephone")}),_jq(a).find(".valUSTelephone").each(function(){if(_jq(this).data("label")!=undefined&&_jq(this).val()==_jq(this).data("label"))return;_jq(this).val()!=""&&/^\([1-9]\d{2}\)\s?\d{3}\-\d{4}$/.test(_jq(this).val())==0&&h(this,"form_telephone")}),_jq(a).find(".valDate").each(function(){if(_jq(this).data("label")!=undefined&&_jq(this).val()==_jq(this).data("label"))return;_jq(this).val()!=""&&/^\d{1,2}(\-|\/|\.)\d{1,2}\1\d{2}$/.test(_jq(this).val())==0&&h(this,"form_date")}),_jq(a).find(".valDate2").each(function(){if(_jq(this).data("label")!=undefined&&_jq(this).val()==_jq(this).data("label"))return;_jq(this).val()!=""&&/^\d{1,2}(\-|\/|\.)\d{1,2}\1\d{2,4}$/.test(_jq(this).val())==0&&h(this,"form_date")}),_jq(a).find(".valUSDate").each(function(){if(_jq(this).data("label")!=undefined&&_jq(this).val()==_jq(this).data("label"))return;_jq(this).val()!=""&&/^\d{1,2}(\-|\/|\.)\d{1,2}\1\d{4}$/.test(_jq(this).val())==0&&h(this,"form_date")}),_jq(a).find("[class*=datePicker]").each(function(){_jq(this).attr("class").match(/datePicker\[(.*),([\d]{1})\]/);if(_jq(this).val()!=""&&RegExp.$1!=""&&RegExp.$2!=""){var a=RegExp.$1;a=a.replace(/\//g,"\\/"),a=a.replace(/\s/g,"\\s+"),a=a.replace(/\-/g,"\\-"),a=a.replace(/\./g,"\\."),a=a.replace(/\[dd\]/g,"\\d{1,2}"),a=a.replace(/\[mm\]/g,"\\d{1,2}"),a=a.replace(/\[yy\]/g,"\\d{2}"),a=a.replace(/\[yyyy\]/g,"\\d{4}"),a=a.replace(/\[DD\]/g,"[^\\d]+"),a=a.replace(/\[MM\]/g,"[^\\d]+"),a=a.replace(/\[D\]/g,"[^\\d]+"),a=a.replace(/\[M\]/g,"[^\\d]+"),a="^"+a+"$";var b=new RegExp(a);b.test(_jq(this).val())||h(this,"form_date")}}),_jq(a).find("[class*=valCDate]").each(function(){if(_jq(this).data("label")!=undefined&&_jq(this).val()==_jq(this).data("label"))return;var a=_jq(this).attr("class").split(" ");for(var b=0;b<a.length;b++)if(_jq(this).val()!=""&&a[b].substring(0,8)=="valCDate"){var c=a[b].substring(9,a[b].length-1);c=c.replace(/\_/g,"\\s"),c=c.replace(/\//g,"\\/"),c=c.replace(/\-/g,"\\-"),c=c.replace(/\./g,"\\."),c=c.replace(/\[dd\]/g,"\\d{1,2}"),c=c.replace(/\[mm\]/g,"\\d{1,2}"),c=c.replace(/\[yy\]/g,"\\d{2}"),c=c.replace(/\[yyyy\]/g,"\\d{4}"),c=c.replace(/\[DD\]/g,"[\\wìòàùèé']+"),c=c.replace(/\[MM\]/g,"[\\wìòàùèé']+"),c=c.replace(/\[D\]/g,"[\\wìòàùèé']+"),c=c.replace(/\[M\]/g,"[\\wìòàùèé']+"),c="^"+c+"$";var d=new RegExp(c);d.test(_jq(this).val())||h(this,"form_date")}}),_jq(a).find(".valEmail").each(function(){if(_jq(this).data("label")!=undefined&&_jq(this).val()==_jq(this).data("label"))return;_jq(this).val()!=""&&/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i.test(_jq(this).val())==0&&h(this,"form_email")}),_jq(a).find(".valCF").each(function(){if(_jq(this).data("label")!=undefined&&_jq(this).val()==_jq(this).data("label"))return;_jq(this).val(_jq(this).val().toUpperCase()),_jq(this).val()!=""&&/^[A-Z]{6}\d{2}[A-Z]\d{2}[A-Z]\d{3}[A-Z]$/.test(_jq(this).val())==0&&/^[0-9]+$/.test(_jq(this).val())==0&&h(this,"form_CF")}),_jq(a).find(".valURL").each(function(){if(_jq(this).data("label")!=undefined&&_jq(this).val()==_jq(this).data("label"))return;_jq(this).val(_jq(this).val().toUpperCase()),_jq(this).val()!=""&&/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(_jq(this).val())==0&&h(this,"form_URL")}),_jq(a).find(".valUSZIP").each(function(){if(_jq(this).data("label")!=undefined&&_jq(this).val()==_jq(this).data("label"))return;_jq(this).val(_jq(this).val().toUpperCase()),_jq(this).val()!=""&&/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(_jq(this).val())==0&&h(this,"form_format")}),_jq(a).find("[class*=valCustom]").each(function(){if(_jq(this).data("label")!=undefined&&_jq(this).val()==_jq(this).data("label"))return;var a=_jq(this).attr("class").split(" ");for(var b=0;b<a.length;b++)if(_jq(this).val()!=""&&a[b].substring(0,9)=="valCustom"){var c=a[b].substring(10,a[b].length-1);c=i(c),_jq(this).val()!=""&&_jq(this).val()!=""&&c.test(_jq(this).val())==0&&h(this,"form_format")}}),_jq(a).find("[class*=valVAT]").each(function(){return!0}),_jq(a).find("input.valDisclaimer").each(function(){this.checked||h(_jq(this),"form_err_disclaimer")}),_jq(a).find("[class*=imCpt]").not("iframe").each(function(){x5engine.imForm.checkCaptcha(_jq(this))||(x5engine.imForm.showCaptcha(a),h(_jq(this),"form_captcha"))}),_jq(a).find("input[type=submit]").attr("disabled",!1).attr("value",e),_jq(a).find(g+"_fakebutton2").attr("disabled",!1).attr("value",f),_jq(a).find("[class*=valQuestion]").each(function(){if(_jq(this).data("label")!=undefined&&_jq(this).val()==_jq(this).data("label"))return;var b=_jq(this).attr("class"),c=_jq(a).attr("action");b.match(/valQuestion\[([A-Za-z0-9]+)\]/);if(x5engine.utils.isOnline()){if(RegExp.$1!=""){var d=_jq(this);_jq.ajax({type:"POST",url:c,data:{action:"check_answer",id:RegExp.$1,answer:d.val()},async:!1,cache:!1,success:function(a,b,c){a==="0"&&h(_jq(d),"form_question")}})}}else _jq("#"+_jq(this).attr("id")+"_offlineanswer").val().replace(/\"/g,"'").replace(/\</g,"&lt;").replace(/\>/g,"&gt;")!=_jq(this).val().replace(/\"/g,"'").replace(/\</g,"&lt;").replace(/\>/g,"&gt;")&&h(_jq(this),"form_question")})};return b.type=="tip"&&_jq("."+x5engine.imTip.constants.classId).remove(),_jq(a).find("[type=submit]").length>0&&(e=_jq(a).find("[type=submit]").attr("value"),_jq(a).find("input[type=submit]").attr("disabled",!0).attr("value",x5engine.l10n.getLocalization("form_validating"))),_jq(a).find(g+"_fakebutton2").length>0&&(f=_jq(a).find(id+"_fakebutton2").attr("value"),_jq(a).find(g+"_fakebutton2").attr("disabled",!0).attr("value",x5engine.l10n.getLocalization("form_validating"))),j(),c},submit:function(a,b){x5engine.imForm.validate(a,b)&&(x5engine.utils.isOnline()?(_jq(a).unbind("submit"),_jq(a).submit()):x5engine.utils.showOfflineMessage(b.offlineMessage))}}}),_jq.extend(x5engine,{imGrid:{cell:function(a){var b,c,d,e,f,g,h=!1,i=function(){var b=_jq(a).css("height");_jq(a).css("height","auto");var c=_jq(a).height();return _jq(a).find("[class*=imCpt]").not("iframe").length>0&&(c+=30),_jq(a).css("height",b),c},j=function(){var d=_jq(a).offset();b=d.top,c=b+_jq(a).outerHeight()},k=function(){var b=_jq(a).offset();d=b.left,e=d+_jq(a).outerWidth()};this.height=function(b){if(b==null)return _jq(a).height();_jq(a).height(b-(_jq(a).outerHeight()-_jq(a).height()))},this.pushY=function(b){_jq(a).css("top").match(/^([0-9]+)[a-z]*$/);var c=RegExp.$1*1;c+=b,_jq(a).css("top",c+"px")},this.html=function(b){if(b==null)return _jq(a).html();_jq(a).html(b)},this.isAbsolute=function(a){if(a==null)return h;h=a},this.sy=function(){return j(),b},this.ey=function(){return j(),c},this.sx=function(){return k(),d},this.ex=function(){return k(),e},g=_jq(a).offset().top,f=i(),_jq(a).height()<f&&_jq(a).height(f)},init:function(){if(x5engine.settings.imGrid.enabled){var a=[],b=[],c,d,e,f=_jq("#imFooPad"),g,h;f.length>0&&(h=f.offset(),h=h.top,g=h+f.innerHeight()),_jq("[class*=imGrid]").each(function(){var c=_jq(this).attr("class"),d,e,f,g=!1;/imGrid\[[0-9]+,\s*[0-9]+[,]*\s*[0-9]*\]/.test(c)&&(c.match(/imGrid\[([0-9]+),\s*([0-9]+)[,]?\s*([0-9]*)\]/),d=RegExp.$1*1,e=RegExp.$2*1,RegExp.$3*1==1&&(g=!0),a[e]==null&&(a[e]=[]),b[d]==null&&(b[d]=[]),f=new x5engine.imGrid.cell(_jq(this)),f.isAbsolute(g),a[e][a[e].length]=f,b[d][b[d].length]=f)});for(c=0;c<a.length;c++)if(a[c]!=null){var i=0;for(d=0;d<a[c].length;d++){if(a[c][d].isAbsolute()&&c!=0)for(c2=0;c2<a[c-1].length;c2++){var j=a[c-1][c2],k=a[c][d];j.ey()>k.sy()&&(j.sx()<k.ex()||j.ex()>k.sx())&&k.pushY(j.ey()-k.sy())}a[c][d].ey()>i&&(i=a[c][d].ey())}for(d=0;d<a[c].length;d++)a[c][d].height(i-a[c][d].sy())}f.length>0&&(i>g?f.remove():f.height(g-h-i-(_jq("#imBtMn").length>0?_jq("#imBtMn").outerHeight():0)))}}}}),_jq.extend(x5engine,{imHour:function(a){var b=new Date;_jq(a).empty().append(x5engine.utils.imFormatInt(b.getHours())+":"+x5engine.utils.imFormatInt(b.getMinutes())+":"+x5engine.utils.imFormatInt(b.getSeconds())+" "),setTimeout("x5engine.imHour('"+a+"')",1e3)}}),_jq.extend(x5engine,{imKeys:{Replace:function(a,b){var c=_jq(a).find();for(var d=0;d<c.length;d++)x5engine.imKeys.Replace(c[d],b);for(d=0;d<b.length;d++)_jq.isFunction(b[d].r)?_jq(a).html(_jq(a).html().replace(b[d].f,b[d].r())):_jq(a).html(_jq(a).html().replace(b[d].f,b[d].r))},Set:function(a){x5engine.imKeys.Replace(_jq("body"),a),x5engine.imDate(".imDate",x5engine.l10n.getLocalization("date_days"),x5engine.l10n.getLocalization("date_months")),x5engine.imHour(".imHour")}}}),_jq.extend(x5engine,{imMarquee:function(a){a.direction=a.direction||"up",a.easing=a.easing||"linear",a.speed=a.speed||2e3,a.bounce=a.bounce||!1,a.type=a.type||"inner";var b=_jq(a.object),c=b.html();b.empty().append('<div class="imRoller">'+c+"</div>"),b.css({position:"relative",overflow:"hidden"});var d=_jq(a.object+" .imRoller");d.css("position","relative");var e=function(){var c;switch(a.direction){case"up":a.type=="inner"?c=b.innerHeight()-d.outerHeight():c=b.innerHeight(),d.css({top:c});break;case"BOTTOM":a.type=="inner"?c=0:c=-d.outerHeight(),d.css({top:c});break;case"right":a.type=="inner"?c=0:c=-d.outerWidth(),d.css({left:c});break;case"left":a.type=="inner"?c=b.innerWidth()-d.outerWidth():c=b.innerWidth(),d.css({left:c})}},f=function(){var c;if(a.bounce)switch(a.direction){case"up":a.direction="BOTTOM";break;case"BOTTOM":a.direction="up";break;case"left":a.direction="right";break;case"right":a.direction="left"}e();switch(a.direction){case"up":a.type=="inner"?c=0:c=-d.outerHeight(),d.animate({top:c},a.speed,a.easing,function(){f()});break;case"BOTTOM":a.type=="inner"?c=b.innerHeight()-d.outerHeight():c=b.innerHeight(),d.animate({top:c},a.speed,a.easing,function(){f()});break;case"right":a.type=="inner"?c=b.innerWidth()-d.outerWidth():c=b.innerWidth(),d.animate({left:c},a.speed,a.easing,function(){f()});break;case"left":a.type=="inner"?c=0:c=-d.outerWidth(),d.animate({left:-d.outerWidth()},a.speed,a.easing,function(){f()})}};f()}}),_jq.extend(x5engine,{imMenu:{setup:function(a){a.target=a.target||"#imMnMn",a.orientation=a.orientation||"horizontal",a.type=a.type||"singleColumn",a.effect=a.effect||"fade",a.opacity=a.opacity||1,a.timeout=a.timeout||300,a.animationTime=a.animationTime||200,a.menuHeight=a.menuHeight||25,a.submenuHeight=a.submenuHeight||25,a.verticalScroll==null&&(a.verticalScroll=!1);var b=_jq(a.target),c,d=/MSIE 7/.test(navigator.userAgent),e=/MSIE 8/.test(navigator.userAgent),f=null,g=new Array,h=new Array,i,j,k,l=function(b,c){if(b.parent().closest("ul").parent().attr("id")==_jq(a.target).attr("id"))return;if(b==null||b.length==0)return;b.data("flip-direction",c),c<0?b.css({marginLeft:-b.parent("li").width()-b.width()}):b.css({marginLeft:0})},m=function(b){b.children("ul, div").stop(!0,!0),b.children("ul, div").length>0&&b.siblings("li").each(function(){h[_jq(this).attr("id")]!=null&&(clearTimeout(h[_jq(this).attr("id")]),n(_jq(this)))});if(a.type!="multipleColumn"){var c=b.offset();b.closest("ul").data("flip-direction")!=b.children("ul").data("flip-direction")&&l(b.children("ul"),b.closest("ul").data("flip-direction")),b.children("ul").data("flip-direction")==1&&c.left+b.width()+b.children("ul").width()>_jq(window).width()+_jq(window).scrollLeft()&&l(b.children("ul"),-1),b.children("ul").data("flip-direction")==-1&&c.left-b.width()<_jq(window).scrollLeft()&&l(b.children("ul"),1)}switch(a.effect){case"fade":b.children("ul,div").fadeIn(a.animationTime);break;case"v-slide":b.children("ul,div").slideDown(a.animationTime);break;case"h-slide":if(b.children(".jsOverflowControl").length>0){if(b.children(".jsOverflowControl").attr("vis")=="false"||b.children(".jsOverflowControl").attr("vis")==null){b.children(".jsOverflowControl").attr("vis","true").width("auto");var d=g[b.children(".jsOverflowControl").attr("id_number")].width;a.orientation=="horizontal"?b.children(".jsOverflowControl").css({overflow:"hidden",width:0}):(b.children(".jsOverflowControl").children("div").css({marginTop:0,marginLeft:0}),b.children(".jsOverflowControl").css({overflow:"hidden",width:0})),b.children(".jsOverflowControl").fadeIn(1).animate({width:d},a.animationTime,null,function(){_jq(this).css("overflow","visible")})}}else if(b.children("ul").attr("vis")=="false"||b.children("ul").attr("vis")==null){b.children("ul").attr("vis","true").width("auto").height("auto");var d=b.children("ul").width();b.children("ul.autoHide").css({overflow:"hidden",width:0}),b.children("ul.autoHide").fadeIn(1).animate({width:d},a.animationTime,null,function(){_jq(this).css("overflow","visible")})}break;case"b-slide":if(b.children(".jsOverflowControl").length>0){if(b.children(".jsOverflowControl").attr("vis")=="false"||b.children(".jsOverflowControl").attr("vis")==null){b.children(".jsOverflowControl").attr("vis","true").width("auto");var d=g[b.children(".jsOverflowControl").attr("id_number")].width,e=g[b.children(".jsOverflowControl").attr("id_number")].height;a.orientation=="horizontal"?b.children(".jsOverflowControl").css({overflow:"hidden",width:0,height:0}):(b.children(".jsOverflowControl").children("div").css({marginTop:0,marginLeft:0}),b.children(".jsOverflowControl").css({overflow:"hidden",width:0,height:0})),b.children(".jsOverflowControl").fadeIn(1).animate({width:d,height:e},a.animationTime,null,function(){_jq(this).css("overflow","visible")})}}else if(b.children("ul").attr("vis")=="false"||b.children("ul").attr("vis")==null){b.children("ul").attr("vis","true").width("auto").height("auto");var d=b.children("ul").width(),e=b.children("ul").height();b.children("ul.autoHide").css({overflow:"hidden",width:0,height:0}),b.children("ul.autoHide").fadeIn(1).animate({width:d,height:e},a.animationTime,null,function(){_jq(this).css("overflow","visible")})}break;default:b.children("ul,div").fadeIn(1)}},n=function(b){b.children("ul,div").stop(!0,!0),b.children("ul, div").each(function(){_jq(this).children("li, ul").each(function(){_jq(this).is("ul")?_jq(this).children("li").each(function(){n(_jq(this))}):n(_jq(this))})});switch(a.effect){case"fade":b.children("ul,div").fadeOut(a.animationTime);break;case"v-slide":b.children("ul,div").slideUp(a.animationTime);break;case"h-slide":b.children("div").length==0?b.children("ul").animate({width:0},a.animationTime,"swing",function(){_jq(this).fadeOut(0),_jq(this).attr("vis","false")}):b.children("div").animate({width:0},a.animationTime,"swing",function(){_jq(this).fadeOut(0),_jq(this).attr("vis","false")});break;case"b-slide":b.children("div").length==0?b.children("ul").animate({width:0,height:0},a.animationTime,"swing",function(){_jq(this).fadeOut(0),_jq(this).css("overflow","hidden"),_jq(this).attr("vis","false")}):b.children("div").animate({width:0,height:0},a.animationTime,"swing",function(){_jq(this).fadeOut(0),_jq(this).css("overflow","hidden"),_jq(this).attr("vis","false")});break;case"none":b.children("ul,div").fadeOut(1)}};b.find(".auto").removeClass("auto").addClass("autoHide"),b.find("ul").data("flip-direction",1),a.type=="multipleColumn"&&(a.effect=="h-slide"||a.effect=="b-slide")&&b.find("li > div").each(function(){var a=_jq(this).width(),b=_jq(this).height(),c=g.length;_jq(this).wrapInner('<div style="display: block; width: '+a+"px; height: "+b+'px;" />').addClass("jsOverflowControl"),_jq(this).attr("id_number",c),g[c]={width:a,height:b},_jq(this).css({overflow:"hidden",width:a,height:b})}),d&&a.type!="multipleColumn"&&(_jq("#imMnMn ul ul ul").css({marginTop:-a.submenuHeight,marginLeft:0}),_jq("#imMnMn ul ul").css({marginLeft:0})),d&&a.orientation=="horizontal"&&(_jq("#imMnMn > ul > li > ul, #imMnMn > ul > li > div").css("margin-top",0),a.type=="multipleColumn"&&_jq("#imMnMn > ul > li > div").css("margin-left",0));var o=_jq(".imMnMnTxt img").css("position"),p=null,q=function(){_jq("#imFooPad").length>0?p=_jq("#imFooPad").height():p=_jq("#imContent").height()},r=function(){var b=_jq("#imMnMn").css("padding-top").replace(/px/g,"")*1,c=_jq("#imFooPad"),d=_jq("#imMnMn"),e=_jq("#imContent");a.verticalScroll&&(b+=d.children("ul").css("margin-top").replace(/px/g,"")*1,_jq(window).unbind("scroll",r).scroll(r));if(c.length>0)c.height(Math.max(p,b+d.children("ul").outerHeight()-(e.height()-c.height())));else{var f=Math.max(p,b+d.children("ul").outerHeight()),g=_jq("#imBtMn");a.verticalScroll&&g.length>0&&c.length==0&&g.css("margin-top",Math.max(0,f-p+15)),e.height(f)}};_jq("#imContent").change(function(){_jq("#imContent").height("auto"),q(),r()}),a.type=="accordion"&&(_jq("#imMnMn > ul > li > ul").slideUp(0),_jq("#imMnMn > ul > li > span.imMnMnFirstBg").click(function(){_jq(this).parent().siblings("li").each(function(){_jq(this).children("ul").slideUp(a.animationTime)}),_jq(this).siblings("ul").children("ul").hide(0),_jq(this).siblings("ul").slideToggle(a.animationTime,r)}),q(),r(),b=_jq("#imMnMn > ul > li > ul")),b.find("li").hover(function(){var a=_jq(this),b=a.attr("id");h[b]!=null&&clearTimeout(h[b]),a.find("div ul ul").hide(),h[b]=setTimeout(function(){m(a)},300)}),b.find("li").mouseleave(function(){var b=_jq(this),c=b.attr("id");h[c]!=null&&clearTimeout(h[c]),h[c]=setTimeout(function(){n(b)},a.timeout)}),a.verticalScroll&&(c=_jq(a.target),a.type=="accordion"&&(c=c.children("ul")),i=c.offset(),i=i.top,k=_jq(document).height(),j=c.position(),_jq(window).scroll(function(){c.stop(!0,!1);var a=c.offset(),b=c.position();((a.top-_jq(window).scrollTop()<0||_jq(window).scrollTop()>i)&&_jq(window).scrollTop()+c.height()<k||j.top<b.top)&&_jq(window).scrollTop()-i>0?c.animate({marginTop:_jq(window).scrollTop()-i},"medium"):_jq(window).scrollTop()-i<=0&&c.animate({marginTop:0},"fast")})),_jq("#imContent").trigger("change")}}}),_jq.extend(x5engine,{imQueue:{_init_payload:[],_close_payload:[],_init_setted_up:!1,_close_setted_up:!1,_close_queue_executed:!1,_exec:function(a){for(var b=0;b<a.length;b++)try{_jq.globalEval(a[b]+";")}catch(c){}},push_init:function(a,b){b=b||!1;if(!b&&_jq.inArray(a,x5engine.imQueue._init_payload)==-1||b)x5engine.imQueue._init_payload[x5engine.imQueue._init_payload.length]=a;x5engine.imQueue._init_setted_up||(_jq(document).ready(function(){x5engine.imQueue._exec(x5engine.imQueue._init_payload)}),x5engine.imQueue._init_setted_up=!0)},push_close:function(a,b){b=b||!1;if(!b&&_jq.inArray(a,x5engine.imQueue._close_payload)==-1||b)x5engine.imQueue._close_payload[x5engine.imQueue._close_payload.length]=a;x5engine.imQueue._close_setted_up||(_jq(window).bind("beforeunload",function(){x5engine.imQueue._close_queue_executed||(x5engine.imQueue._close_queue_executed=!0,x5engine.imQueue._exec(x5engine.imQueue._close_payload))}),x5engine.imQueue._close_setted_up=!0)}}}),_jq.extend(x5engine,{imRollover:function(a){a.movement=a.movement||"ALTERNATE",a.direction=a.direction||"UP",a.effect=a.effect||"LINEAR";var b,c=null,d=a.time,e=null,f=0;switch(a.effect){case"SWING":b="swing";break;case"BOUNCE":b="imBounce";break;default:b="linear"}var g=_jq("#"+a.id),h,i=function(j){j==null&&(j=!0),j&&(f=0),e!=null&&clearInterval(e),e=setInterval(function(){f+=10},10),a.time=d-f/1e3,a.time<=0&&(a.time=d);switch(a.movement){case"PAGINATE":switch(a.direction){case"UP":var k=h.css("top").replace("px","");isNaN(parseInt(k))?k=0:k=parseInt(k),k>a.height-h.height()?h.animate({top:k-a.height},{duration:"medium",complete:function(){c=setTimeout(function(){i()},a.time*1e3)},easing:b}):h.animate({top:0},{duration:"medium",complete:function(){c=setTimeout(function(){i()},a.time*1e3)},easing:b});break;case"BOTTOM":var k=h.css("top").replace("px","");isNaN(parseInt(k))?k=0:k=parseInt(k),k<=0?h.animate({top:k+a.height},{duration:"medium",complete:function(){c=setTimeout(function(){i()},a.time*1e3)},easing:b}):h.animate({top:a.height-h.height()},{duration:"medium",complete:function(){c=setTimeout(function(){i()},a.time*1e3)},easing:b});break;case"LEFT":var m=h.css("left").replace("px","");isNaN(parseInt(m))?m=0:m=parseInt(m),m>-h.width()+g.width()?h.animate({left:m-g.width()},{duration:"medium",complete:function(){c=setTimeout(function(){i()},a.time*1e3)},easing:b}):h.animate({left:0},{duration:"medium",complete:function(){c=setTimeout(function(){i()},a.time*1e3)},easing:b});break;case"RIGHT":var m=h.css("left").replace("px","");isNaN(parseInt(m))?m=0:m=parseInt(m),m<0?h.animate({left:m+g.width()},{duration:"medium",complete:function(){setTimeout(function(){i()},a.time*1e3)},easing:b}):h.animate({left:-h.width()+g.width()},{duration:"medium",complete:function(){setTimeout(function(){i()},a.time*1e3)},easing:b})}break;case"CONTINUE":switch(a.direction){case"UP":h.animate({top:-h.height()},{duration:a.time*1e3,complete:function(){h.css({top:a.height}),i()},easing:b});break;case"BOTTOM":h.animate({top:a.height},{duration:a.time*1e3,complete:function(){h.css({top:-h.height()}),i()},easing:b});break;case"LEFT":h.animate({left:-h.width()},{duration:a.time*1e3,complete:function(){h.css({left:g.width()}),i()},easing:b});break;case"RIGHT":h.animate({left:g.width()},{duration:a.time*1e3,complete:function(){h.css({left:-h.width()}),i()},easing:b})}break;case"SINGLE":switch(a.direction){case"UP":h.animate({top:0},{duration:a.time*1e3,easing:b});break;case"BOTTOM":h.animate({top:-h.height()+a.height},{duration:a.time*1e3,easing:b});break;case"RIGHT":h.animate({left:-l+g.width()},{duration:a.time*1e3,easing:b});break;case"LEFT":h.animate({left:0},{duration:a.time*1e3,easing:b})}break;default:switch(a.direction){case"UP":h.animate({top:0},{duration:a.time*1e3,complete:function(){a.direction="BOTTOM",i()},easing:b});break;case"BOTTOM":h.animate({top:-h.height()+a.height},{duration:a.time*1e3,complete:function(){a.direction="UP",i()},easing:b});break;case"LEFT":h.animate({left:-l+g.width()},{duration:a.time*1e3,complete:function(){a.direction="RIGHT",i()},easing:b});break;case"RIGHT":h.animate({left:0},{duration:a.time*1e3,complete:function(){a.direction="LEFT",i()},easing:b})}}},j=function(){e!=null&&clearInterval(e),h.stop()},k=function(b){_jq("#"+a.id).append('<div id="widthTest"><div id="widthTestSpan">'+b+"</div></div>");var c=_jq("#widthTest"),d=_jq("#widthTestSpan");c.css({width:"50000000px",position:"absolute"}),d.css({width:"auto",position:"absolute",display:"inline"});var e=d.outerWidth()+30;return c.remove(),e};g.wrapInner('<div id="'+a.id+'_runner">'),h=_jq("#"+a.id+"_runner"),g.css({position:"relative",overflow:"hidden"}),h.css({position:"absolute"}),a.mouselock&&a.movement!="PAGINATE"?(g.mouseenter(function(){j()}),g.mouseleave(function(){i(!1)})):a.mouselock&&a.movement=="PAGINATE"&&(g.mouseover(function(){c!=null&&clearTimeout(c)}),g.mouseleave(function(){c=setTimeout(function(){i(!1)},a.time*1e3)}));switch(a.movement){case"CONTINUE":switch(a.direction){case"UP":h.css({left:0,top:a.height,width:"100%"});break;case"BOTTOM":h.css({left:0,top:-h.height(),width:"100%"});break;case"LEFT":h.css({left:g.width()});var l=k(h.html());h.css({width:l});break;case"RIGHT":var l=k(h.html());h.css({left:-h.width(),width:l})}break;case"PAGINATE":switch(a.direction){case"BOTTOM":h.css({left:0,top:-h.height()+a.height,width:"100%"});break;case"UP":h.css({left:0,top:0,width:"100%"});break;case"RIGHT":var l=k(h.html());h.css({left:-l+g.width(),width:l});break;case"LEFT":var l=k(h.html());h.css({left:0,width:l})}break;default:switch(a.direction){case"UP":h.css({left:0,top:-h.height()+a.height,width:"100%"});break;case"BOTTOM":h.css({left:0,top:0,width:"100%"});break;case"LEFT":var l=k(h.html());h.css({left:-l+g.width(),width:l});break;case"RIGHT":var l=k(h.html());h.css({left:0,width:l})}}a.movement!="PAGINATE"?i():c=setTimeout(function(){i()},a.time*1e3)}}),_jq.extend(x5engine,{imSearch:{current:null,Load:function(){_jq("#imSearchWebPages, #imSearchBlog, #imSearchProducts, #imSearchImages, #imSearchVideos").fadeOut(0),_jq("#imSearchWebPages, #imSearchBlog, #imSearchProducts, #imSearchImages, #imSearchVideos").first().fadeIn(0),x5engine.imSearch.current="#"+_jq("#imSearchWebPages, #imSearchBlog, #imSearchProducts, #imSearchImages, #imSearchVideos").first().attr("id"),_jq("#imSearchWebPages, #imSearchBlog, #imSearchProducts, #imSearchImages, #imSearchVideos").length<2&&(_jq("#imSearchSideBar").hide(0),_jq("#imSearchContent").css({width:"100%"}))},Show:function(a){return a!=x5engine.imSearch.current&&_jq("#imSearchWebPages, #imSearchBlog, #imSearchProducts, #imSearchImages, #imSearchVideos").fadeOut(1,function(){_jq(a).fadeIn(0),x5engine.imSearch.current=a}),!1}}}),_jq.extend(x5engine,{imShowBox:{_create:function(a,b,c){var d=a,e=b||0,f=c||null,g=d.loadingImg||"imLoad.gif",h=d.closeImg||"imClose.png",i=350;d.effect=="none"&&(i=0);var j=d.opacity,k='<div id="imSB"><div id="imSBmedia"></div><div id="imDes"></div></div>',l,m=!1,n=!1,o=null,p=!1,q=function(){_jq("#imSB").css("backgroundImage","url('"+g+"')")},r=function(){_jq("#imSB").css("background-image","url('')")},s=function(a){var b=i,c=d.background||"black";if(c=="none"||c=="transparent")j=.01,c="#ffffff";_jq("#imSB").width()!==null?_jq("#imSB").before('<div id="imSBBG">&nbsp;</div>'):_jq("body").append('<div id="imSBBG">&nbsp;</div>'),d.effect=="none"&&(b=0),_jq("#imSBBG"
).fadeOut(0),_jq("#imSBBG").css({backgroundColor:c,position:"fixed",top:0,left:0,zIndex:x5engine.settings.zIndex.showBox,width:_jq(window).width(),height:_jq(window).height()}),d.radialBg&&(/Firefox/.test(navigator.userAgent)?_jq("#imSBBG").css({"background-image":"-moz-radial-gradient(center 45deg, ellipse farthest-corner, "+x5engine.utils.hex2rgb(c,80,80,80)+" 0%, "+x5engine.utils.hex2rgb(c,40,40,40)+" 40%, "+x5engine.utils.hex2rgb(c)+" 100%)"}):/Chrome/.test(navigator.userAgent)&&_jq("#imSBBG").css({background:"-webkit-gradient(radial, 50% 50%, 0, 50% 50%, 500, from("+x5engine.utils.hex2rgb(c,80,80,80)+"), to("+x5engine.utils.hex2rgb(c)+"))"})),_jq("#imSBBG").fadeTo(b,j,function(){a!==null&&a!==undefined&&_jq.isFunction(a)&&a(),_jq("#imSBBG").click(u),_jq("#imSBBG").mousemove(function(){p=!1})})},t=function(){_jq("#imSBBG").fadeOut(i)},u=function(){r(),y(),_jq("#imClose").remove(),_jq("#imDes").remove(),_jq("#imNext").remove(),_jq("#imPrev").remove(),_jq(document).unbind("keydown",K),d.media[e].type!="img"&&_jq("#imSBmedia").empty();if(d.effect=="fade"||d.effect=="none")_jq("#imSB").fadeOut(i,function(){_jq("#imSBBG").remove(),_jq("#imSB").remove()});else if(d.effect=="move")_jq("#imSB").animate({top:-_jq("#imSB").height()-100},i/2,null,function(){_jq("#imSBBG").remove(),_jq("#imSB").remove()});else if(d.effect=="zoom"||d.effect=="hide")if(!m){var a=_jq(c).offset();a.left-=_jq(window).scrollLeft(),a.top-=_jq(window).scrollTop(),_jq("#imSBmedia img, #imSBmedia").css("width","100%");if(d.media[e].type=="img"){var b=_jq("#imSBmedia").clone();b.attr("id","imSBmedia2"),b.find("img").attr("src",_jq(c).attr("src")),b.css({position:"absolute",top:0,left:0}),_jq("#imSBmedia").before(b),b.fadeOut(0),b.fadeIn(i),_jq("#imSBmedia").fadeOut(i)}_jq("#imSB").animate({borderWidth:0,left:a.left,top:a.top,width:_jq(c).width(),margin:0,padding:0,height:_jq(c).height()},i,function(){_jq(c).css("visibility","visible"),_jq("#imSBBG").remove(),_jq("#imSB").remove()})}else _jq("#imSB").fadeOut(i),_jq("#imSBmedia").fadeOut(i,function(){_jq("#imSBBG").remove(),_jq("#imSB").remove()}),_jq(c).css("visibility")!="visible"&&_jq(c).fadeOut(1,function(){_jq(c).css("visibility","visible"),_jq(c).fadeIn(i)});_jq(window).unbind("resize",v),t(),_jq("body").unbind("keypress",O)},v=function(){l!==null&&l!==undefined&&clearTimeout(l),l=setTimeout(C,200),_jq("#imSB").width()!==null&&(_jq("#imSBBG").width(_jq(document).width()),_jq("#imSBBG").height(_jq(document).height()))},w=function(a,b,c,e){return _jq("#imSBBG").width()!==null?_jq("#imSBBG").after(k):_jq("body").append(k),d.effect!="none"&&_jq("#imSB").fadeOut(0),_jq("#imSB").css({top:b,left:a,width:c,height:e,padding:d.innerBorder,zIndex:x5engine.settings.zIndex.showBox+1,backgroundColor:d.boxColor}),_jq("#imSB #imDes").css("color",d.textColor),_jq("#imSB").css("-moz-border-radius","10px"),_jq("#imSB").css("-webkit-border-radius","10px"),_jq("#imSB").css("border-radius","10px"),_jq("#imSB")},x=function(){/MSIE 7/.test(navigator.userAgent)===!1&&(_jq("#imSB").css("box-shadow","0px 3px 7px #000"),_jq("#imSB").css("-webkit-box-shadow","0px 3px 7px #000"),_jq("#imSB").css("-moz-box-shadow","0px 3px 7px #000"))},y=function(){/MSIE 7/.test(navigator.userAgent)===!1&&(_jq("#imSB").css("box-shadow",""),_jq("#imSB").css("-webkit-box-shadow",""),_jq("#imSB").css("-moz-box-shadow",""))},z=function(){r(),_jq("#imSBmedia img").unbind("load"),_jq("#imSBmedia").empty().append("File not found").fadeIn()},A=function(a){q(),_jq("#imSBBG").click(u),p=H(),G(),_jq("#imDes:visible").length>0&&_jq("#imDes:visible").html()!==""?_jq("#imDes").fadeOut(i):_jq("#imDes").fadeOut(0),_jq("#imSB #imClose").fadeOut(i+1,function(){_jq("#imSB #imClose").remove()}),_jq("#imSBmedia").length===0&&(_jq("#imSB object").remove(),_jq("#imSB").prepend('<div id="imSBmedia"></div>')),_jq("#imSBmedia").fadeOut(_jq("#imSBmedia").html()===""?1:i+1,function(){_jq("#imDes").empty(),d.media[e].text!==""?(_jq("#imDes").append(d.media[e].text.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<")),_jq("#imDes").height("auto")):_jq("#imDes").fadeOut(0),_jq("#imSBmedia").empty();switch(d.media[e].type){case"img":_jq("#imSBmedia").append("<img />"),d.effect!="none"&&_jq("#imSBmedia img").fadeOut(0),d.effect!="zoom"&&d.effect!="hide"||m?_jq("#imSBmedia img").load(C):_jq("#imSBmedia img").load(D),_jq("#imSBmedia img").error(z),_jq("#imSBmedia img").attr("src",d.media[e].url);break;case"video":d.effect!="zoom"&&d.effect!="hide"||m?C(function(){_jq("#imSBmedia").append('<embed src="'+d.media[e].url+'" width="'+d.media[e].width+'" height="'+d.media[e].height+'" autostart="true"></embed>')}):D(function(){_jq("#imSBmedia").append('<embed src="'+d.media[e].url+'" width="'+d.media[e].width+'" height="'+d.media[e].height+'" autostart="true"></embed>')});break;case"swf":d.effect!="zoom"&&d.effect!="hide"||m?C(function(){_jq("#imSBmedia").append('<embed src="'+d.media[e].url+'" type="application/x-shockwave-flash" width="'+d.media[e].width+'" height="'+d.media[e].height+'" wmode="opaque" menu="false" quality="high"></embed>')}):D(function(){_jq("#imSBmedia").append('<embed src="'+d.media[e].url+'" type="application/x-shockwave-flash" width="'+d.media[e].width+'" height="'+d.media[e].height+'" wmode="opaque" menu="false" quality="high"></embed>')});break;case"iframe":d.effect!="zoom"&&d.effect!="hide"||m?C(function(){_jq("#imSBmedia").append("<iframe "+(d.allowFrameTransparency?'allowtransparency="true" ':"")+'src="'+d.media[e].url+'" width="'+d.media[e].width+'" height="'+d.media[e].height+'" frameborder="0" marginwidth="0" marginheight="0"></iframe>')}):D(function(){_jq("#imSBmedia").append("<iframe "+(d.allowFrameTransparency?'allowtransparency="true" ':"")+'src="'+d.media[e].url+'" width="'+d.media[e].width+'" height="'+d.media[e].height+'" frameborder="0" marginwidth="0" marginheight="0"></iframe>')});break;case"code":var a=d.media[e].content;a=a.replace(/&amp;/g,"&"),a=a.replace(/&lt;/g,"<"),a=a.replace(/&gt;/g,">"),a=a.replace(/&quot;/g,'"'),d.effect!="zoom"&&d.effect!="hide"||m?C(function(){_jq("#imSBmedia").append(a),setTimeout(function(){try{_jq("#imSB").unbind("mousemove",L),_jq("#imSB").mousemove().mouseleave(),_jq("#imSB").mousemove(L)}catch(a){}},1e3)}):D(function(){_jq("#imSBmedia").append(a),setTimeout(function(){try{_jq("#imSB").unbind("mousemove",L),_jq("#imSB").mousemove().mouseleave(),_jq("#imSB").mousemove(L)}catch(a){}},1e3)})}})},B=function(a){var b=d.media[a].width,c,e,f=null;_jq("#imDes").width(b),c=d.media[a].height,_jq("#imDes").html()!==""&&(c+=_jq("#imDes").height()),d.media[a].type=="img"&&(_jq("#imSBmedia img").fadeIn(0),_jq("#imSBmedia img").width(""),_jq("#imSBmedia img").height("")),_jq("#imSBmedia").width(""),_jq("#imSBmedia").height(""),b+2*d.border+2*d.innerBorder>_jq(window).width()-50&&(c=c*(_jq(window).width()-50-2*d.border-2*d.innerBorder)/b,b=_jq(window).width()-50-2*d.border-2*d.innerBorder,_jq("#imDes").width(b),_jq("#imDes").html()!==""&&(c+=_jq("#imDes").height()));if(c+2*d.border+2*d.innerBorder>_jq(window).height()-50){var g=_jq("#imDes").outerHeight();b=b*(_jq(window).height()-50-2*d.border-2*d.innerBorder)/c,c=_jq(window).height()-50-2*d.border-2*d.innerBorder,e=c,_jq("#imDes").html()!==""&&(e-=_jq("#imDes").height()),_jq("#imDes").width(Math.round(d.media[a].width*e/d.media[a].height)),_jq("#imDes").height()<=g&&(b=Math.round(d.media[a].width*e/d.media[a].height)),_jq("#imDes").width("")}return[b,c,f]},C=function(a){_jq("#imSBmedia img").length>0&&_jq("#imSBmedia img").unbind("load"),_jq("#imSB").css({padding:d.innerBorder}),_jq("#imDes").fadeOut(_jq("#imSBmedia").html()===""?1:i+1),_jq("#imSBmedia").fadeOut(_jq("#imSBmedia").html()===""?1:i+1,function(){var b=B(e),c=i;_jq("#imSBmedia img").width("100%"),_jq("#imSB").width()==b[0]&&_jq("#imSB").height()==b[1]&&(c=1),_jq("#imSB").width()>b[0]&&(p=!1),_jq("#imSB").animate({left:Math.round((_jq(window).width()-b[0]-2*d.innerBorder-2*d.border)/2),width:b[0]},c,function(){_jq("#imSB").animate({top:Math.round((_jq(window).height()-b[1]-2*d.innerBorder-2*d.border)/2),height:b[1]},c,function(){r(),_jq("#imSBmedia").fadeIn(i+1,function(){p&&L()}),_jq("#imDes").html()!==""&&_jq("#imDes").fadeIn(i),E(),d.media.length>1&&F(),d.shadow&&x(),_jq(window).unbind("resize",v).resize(v),_jq(document).unbind("keydown",K).keydown(K),a!==null&&_jq.isFunction(a)&&a()})})})},D=function(a){_jq("#imSBmedia img").unbind("load");var b=B(e);r(),_jq("#imSBmedia").css({width:"100%",textAlign:"center"}),_jq("#imSBmedia img").css({width:"100%"}),_jq("#imSB").fadeIn(0),_jq("#imSBmedia").fadeOut(1),d.effect=="hide"&&_jq(c).css("visibility","hidden"),_jq("#imSB").css("background-color",d.boxColor),s();var f=_jq("#imSBmedia").clone(!1);f.attr("id","fakeSBImg"),f.find("img").attr("src",_jq(c).attr("src")),f.css({position:"absolute",top:0,left:0}),_jq("#imSB").prepend(f),f.fadeIn(0),f.fadeOut(i,function(){f.remove()}),_jq("#imSBmedia").fadeIn(i),_jq("#imSB").animate({left:Math.round((_jq(window).width()-b[0]-2*d.innerBorder-2*d.border)/2),width:b[0],padding:d.innerBorder,top:Math.round((_jq(window).height()-b[1]-2*d.innerBorder-2*d.border)/2),height:b[1],borderWidth:d.border},i,function(){_jq("#imDes").html()!==""&&_jq("#imDes").fadeIn(i),_jq("#imSB").css("border-width",d.border),E(),p&&L(),d.media.length>1&&F(),d.shadow&&x(),_jq(window).unbind("resize",v).resize(v),a!==null&&_jq.isFunction(a)&&a()})},E=function(){_jq("#imSB").append('<div id="imClose"><img src="'+h+'" /></div>'),_jq("#imSB #imClose img").click(u)},F=function(){_jq("#imPrev").remove(),_jq("#imNext").remove(),_jq("#imSB").append('<div id="imPrev">&lt;</div><div id="imNext">&gt;</div>'),_jq("#imPrev").fadeOut(0),_jq("#imNext").fadeOut(0),_jq("#imPrev").click(N),_jq("#imNext").click(M),_jq("#imSB").unbind("mouseleave"),_jq("#imSB").unbind("mousemove"),_jq("#imSB").mouseleave(function(){o!==null&&o!==undefined&&clearTimeout(o),o=setTimeout(function(){_jq("#imNext").stop(!0,!0),_jq("#imPrev").stop(!0,!0),_jq("#imNext").fadeOut(i),_jq("#imPrev").fadeOut(i)},i/2)}),_jq("#imSB").mousemove(L),n=!0},G=function(){n=!1,_jq("#imPrev").fadeOut(i,function(){_jq("#imPrev").remove()}),_jq("#imNext").fadeOut(i,function(){_jq("#imNext").remove()})},H=function(){return _jq("#imNext:visible").length>0&&_jq("#imPrev:visible").length>0?!0:!1},I=function(){var a=10;_jq("#imNext").css({"-moz-border-top-left-radius":0,"-moz-border-top-right-radius":a,"-moz-border-bottom-right-radius":a,"-moz-border-bottom-left-radius":0,"-webkit-border-top-left-radius":0,"-webkit-border-top-right-radius":a,"-webkit-border-bottom-right-radius":a,"-webkit-border-bottom-left-radius":0,"border-top-left-radius":0,"border-top-right-radius":a,"border-bottom-right-radius":a,"border-bottom-left-radius":0}),_jq("#imPrev").css({"-moz-border-top-left-radius":a,"-moz-border-top-right-radius":0,"-moz-border-bottom-right-radius":0,"-moz-border-bottom-left-radius":a,"-webkit-border-top-left-radius":a,"-webkit-border-top-right-radius":0,"-webkit-border-bottom-right-radius":0,"-webkit-border-bottom-left-radius":a,"border-top-left-radius":a,"border-top-right-radius":0,"border-bottom-right-radius":0,"border-bottom-left-radius":a})},J=function(){var a=10;_jq("#imPrev").css({"-moz-border-top-left-radius":0,"-moz-border-top-right-radius":a,"-moz-border-bottom-right-radius":a,"-moz-border-bottom-left-radius":0,"-webkit-border-top-left-radius":0,"-webkit-border-top-right-radius":a,"-webkit-border-bottom-right-radius":a,"-webkit-border-bottom-left-radius":0,"border-top-left-radius":0,"border-top-right-radius":a,"border-bottom-right-radius":a,"border-bottom-left-radius":0}),_jq("#imNext").css({"-moz-border-top-left-radius":a,"-moz-border-top-right-radius":0,"-moz-border-bottom-right-radius":0,"-moz-border-bottom-left-radius":a,"-webkit-border-top-left-radius":a,"-webkit-border-top-right-radius":0,"-webkit-border-bottom-right-radius":0,"-webkit-border-bottom-left-radius":a,"border-top-left-radius":a,"border-top-right-radius":0,"border-bottom-right-radius":0,"border-bottom-left-radius":a})},K=function(a){if(!_jq("#imSB").is(":animated"))switch(a.keyCode){case 32:case 39:M();break;case 37:N()}a.keyCode==27&&u()},L=function(){o!==null&&o!==undefined&&clearTimeout(o);var a=_jq("#imSB").outerHeight()/2-_jq("#imPrev").outerHeight()/2,b;_jq("#imSB").width()-d.innerBorder*2>_jq("#imPrev").width()*2?(b=d.innerBorder,J()):(b=-_jq("#imPrev").width(),I()),d.media[e].type!="iframe"&&d.media[e].type!="img"&&(b=-_jq("#imPrev").width(),I()),_jq("#imPrev").css({top:a,left:b}),_jq("#imNext").css({top:a,right:b}),_jq("#imPrev").fadeIn(i),_jq("#imNext").fadeIn(i)},M=function(){m=!0,e++,e>=d.media.length&&(e=0),A(e)},N=function(){m=!0,e--,e<0&&(e=d.media.length-1),A(e)},O=function(a){switch(a.keyCode){case 37:case 40:a.preventDefault(),N();break;case 39:case 38:a.preventDefault(),M();break;case 27:a.preventDefault(),u()}};this.showBox=function(){var a=100,b;s(function(){d.effect=="none"||d.effect=="fade"?(b=w(Math.round(_jq(window).width()/2-a/2),Math.round(_jq(window).height()/2-a/2),a,a),q(),b.fadeIn(i,function(){A(e)})):d.effect=="move"&&(b=w(Math.round(_jq(window).width()/2-a/2),-a,a,a),b.fadeIn(0),b.animate({top:Math.round(_jq(window).height()/2-a/2)},i/2,function(){A(e),q()}))})},this.zoomBox=function(){var a=B(e),b;_jq(c).find("img").is("img")&&(c=_jq(c).find("img"));try{b=_jq(c).offset(),b.left-=_jq(window).scrollLeft(),b.top-=_jq(window).scrollTop(),box=w(b.left,b.top,_jq(c).width(),_jq(c).height()),box.css("padding","0px"),box.css("border-width","0px"),box.css("background-color","transparent"),q(),box.fadeIn(),A(e),_jq("body").keypress(O)}catch(f){d.effect="fade",this.showBox()}}},Show:function(a,b,c){a.effect=a.effect||x5engine.settings.imShowBox.effect,a.shadow=a.shadow||x5engine.settings.imShowBox.shadow,a.background=a.background||x5engine.settings.imShowBox.background,a.border=a.border||x5engine.settings.imShowBox.borderRadius,a.textColor=a.textColor||x5engine.settings.imShowBox.textColor,a.boxColor=a.boxColor||x5engine.settings.imShowBox.boxColor,a.opacity=a.opacity||x5engine.settings.imShowBox.opacity,a.closeImg=a.closeImg||x5engine.settings.imShowBox.closeImg,a.loadingImg=a.loadingImg||x5engine.settings.imShowBox.loadingImg,a.innerBorder=a.innerBorder||x5engine.settings.imShowBox.innerBorder,a.radialBg=a.radialBg||x5engine.settings.imShowBox.radialBg,a.allowFrameTransparency===undefined&&(a.allowFrameTransparency=x5engine.settings.imShowBox.allowFrameTransparency);var d=[];for(var e=0;e<a.media.length;e++)d[d.length]=a.media[e].url;x5engine.utils.imPreloadImages(d);if(_jq("#imSB").length===0){var f=new x5engine.imShowBox._create(a,b,c);a.effect=="zoom"||a.effect=="hide"?f.zoomBox():f.showBox()}return!1}}}),_jq.extend(x5engine,{imSiteMap:{toggleLevel:function(a){return a=_jq(a),_jq(a).next(".imSiteMap").slideToggle("medium","swing",function(){_jq(a).next("ul:visible").length>0?_jq(a).children("img").attr("src","res/imfolder_open.gif"):_jq(a).children("img").attr("src","res/imfolder_closed.gif"),_jq("#imContent").triggerHandler("change")}),!1},foldAll:function(){return _jq("#imContent > ul").find(".imSiteMap").slideUp("medium","swing",function(){_jq(this).prev("span").children("img").attr("src","res/imfolder_closed.gif"),_jq("#imContent").triggerHandler("change")}),!1},unfoldAll:function(){return _jq("#imContent > ul").find(".imSiteMap").slideDown("medium","swing",function(){_jq(this).prev("span").children("img").attr("src","res/imfolder_open.gif"),_jq("#imContent").triggerHandler("change")}),!1},setup:function(){_jq("#imContent").triggerHandler("change"),_jq("img").last().one("load",function(){_jq("#imContent").triggerHandler("change")})}}}),_jq.extend(x5engine,{imSlider:{Horizontal:function(a){var b=_jq(a+" .imGlContent"),c=_jq(a+" .imRunner"),d=_jq(a),e=0,f=function(){e+b.innerWidth()>=20?c.innerWidth()%b.innerWidth()==0?e=-c.innerWidth()+b.innerWidth():e=-c.innerWidth()+c.innerWidth()%b.innerWidth():e+=b.innerWidth(),c.animate({left:e})},g=function(){-e<c.width()-b.innerWidth()?e-=b.innerWidth():e=0,c.animate({left:e})};_jq(a+" .imLeftArrow").not(".hiddenArrow").click(f),_jq(a+" .imRightArrow").not(".hiddenArrow").click(g)},Vertical:function(a){var b=_jq(a+" .imGlContent"),c=_jq(a+" .imRunner"),d=_jq(a),e=0;c.css({marginTop:-5});var f=function(){e+b.innerHeight()>=10?c.innerHeight()%b.innerHeight()==0?e=-c.innerHeight()+b.innerHeight():e=-c.innerHeight()+c.innerHeight()%b.innerHeight():e+=b.innerHeight(),c.animate({top:e})},g=function(){-e<c.height()-b.innerHeight()?e-=b.innerHeight():e=0,c.animate({top:e})};_jq(a+" .imTopArrow").click(f),_jq(a+" .imBottomArrow").click(g)},Page:function(a){var b=_jq(a),c=_jq(a+" .imSPage"),d=_jq(a+" .imRunner"),e=0,f=10;d.width(c.length*c.width()),b.append('<div class="imSControls"><p class="imPPrev">&lt;</p><p class="imPNext">&gt;</p></div>');var g=_jq(a+" .imSControls");g.css({"-moz-border-top-left-radius":f,"-moz-border-top-right-radius":f,"-moz-border-bottom-right-radius":0,"-moz-border-bottom-left-radius":0,"-webkit-border-top-left-radius":f,"-webkit-border-top-right-radius":f,"-webkit-border-bottom-right-radius":0,"-webkit-border-bottom-left-radius":0,"border-top-left-radius":f,"border-top-right-radius":f,"border-bottom-right-radius":0,"border-bottom-left-radius":0,color:"black"}),g.fadeTo(0,.9);var h=function(){e-c.width()<-d.width()+c.width()?e=0:e-=c.width(),d.animate({left:e})},i=function(){e+c.width()>0?e=-d.width()+c.width():e+=c.width(),d.animate({left:e})},j=function(){g.stop(!0,!0),g.animate({bottom:-g.height()-50})},k=function(){g.stop(!0,!0),g.animate({bottom:0})};_jq(a+" .imPPrev").click(i),_jq(a+" .imPNext").click(h),b.mouseleave(j),b.mouseover(k)}}}),_jq.extend(x5engine,{imSplashBox:function(a){a.effect=a.effect||x5engine.settings.imSplashBox.effect,a.position=a.position||x5engine.settings.imSplashBox.position,a.shadow==null&&(a.shadow=x5engine.settings.imSplashBox.shadow),a.margin=a.margin||x5engine.settings.imSplashBox.margin,a.width=a.width||x5engine.settings.imSplashBox.width,a.height=a.height||x5engine.settings.imSplashBox.height,a.cookie=a.cookie||x5engine.settings.imSplashBox.cookie,a.link=a.link||x5engine.settings.imSplashBox.link,a.image=a.image||x5engine.settings.imSplashBox.image,a.sound=a.sound||x5engine.settings.imSplashBox.sound;var b="res/imClose.png",c=500;if(a.cookie&&_jq.imCookie("im_splash")=="true"&&x5engine.utils.isOnline())return!1;var d,e=function(){switch(a.position){case"center":d={left:(_jq(window).width()-cWidth)/2,top:(_jq(window).height()-cHeight)/2};break;case"bottom-right":d={left:_jq(window).width()-cWidth-a.margin,top:_jq(window).height()-cHeight-a.margin};break;case"bottom-left":d={left:a.margin,top:_jq(window).height()-cHeight-a.margin};break;case"top-right":d={left:_jq(window).width()-cWidth-a.margin,top:a.margin};break;case"top-left":d={left:a.margin,top:a.margin}}g.css(d)},f=function(){g.fadeOut(200,function(){g.remove(),x5engine.utils.imSoundLink.Stop()})};_jq("body").append('<div id="imSplashBox"><div style="text-align: right; "><div id="imClose"><img src="'+b+'" /></div></div><div id="splashContent" style="overflow: hidden;"><img /></div></div>'),a.sound!=""&&a.sound!=null&&x5engine.utils.imSoundLink.Play(a.sound);var g=_jq("#imSplashBox");g.fadeOut(0),g.css({zIndex:x5engine.settings.zIndex.splashBox}),a.shadow&&(g.css("box-shadow","0px 3px 7px #000"),g.css("-webkit-box-shadow","0px 3px 7px #000"),g.css("-moz-box-shadow","0px 3px 7px #000")),_jq("#splashContent img").first().load(function(){setTimeout(function(){_jq(this).unbind("load"),g.fadeIn(0),cWidth=_jq("#imSplashBox").outerWidth(),cHeight=_jq("#imSplashBox").outerHeight(),g.fadeOut(0),e(),_jq(window).resize(e),_jq("#imClose img").click(f),_jq("#splashContent img").click(function(){location.href=a.link}),a.cookie&&_jq.imCookie("im_splash","true",{expires:0});switch(a.effect){case"fromtop":g.css({top:-_jq(window).height()-cHeight}),g.fadeIn(0),g.animate(d,c);break;case"frombottom":g.css({top:_jq(window).height()+cHeight}),g.fadeIn(0),g.animate(d,c);break;case"fromleft":g.css({left:-cWidth}),g.fadeIn(0),g.animate(d,c);break;case"fromright":g.css({left:cWidth+_jq(window).width()}),g.fadeIn(0),g.animate(d,c);break;case"fade":g.fadeIn(c);break;default:g.fadeIn(0)}},500)}),_jq("#splashContent img").attr("src",a.image)}}),_jq.extend(x5engine,{imStarRating:function(a,b,c){var d=null,e,f=function(){d!=null&&clearTimeout(d);var c=_jq(this).attr("class");c.match(/imStarRating\[([0-9]*)\]/),c=RegExp.$1;for(var e=0;e<b;e++)e<c?_jq("#"+a+"_star"+(e+1)).attr("src","res/star_full.png"):_jq("#"+a+"_star"+(e+1)).attr("src","res/star_empty.png")},g=function(){d=setTimeout(function(){for(var c=0;c<b;c++)_jq("#"+a+"_star"+(c+1)).attr("src","res/star_empty.png")},50)},h=function(){var c=_jq(this).attr("class");c.match(/imStarRating\[([0-9]*)\]/),c=RegExp.$1,(_jq.imCookie(a)==null||_jq.imCookie(a)==0)&&_jq.ajax({url:window.location.href,type:"POST",data:{value:c,scale:b,id:a},success:function(b){_jq.imCookie(a,"y"),window.location.href=window.location.href}})};for(e=0;e<b;e++)_jq("#"+a+"_star"+(e+1)).mouseover(f),_jq("#"+a+"_star"+(e+1)).mouseleave(g),_jq("#"+a+"_star"+(e+1)).click(h)}}),_jq.extend(x5engine,{imTip:{constants:{locked:"imFixedTip",classId:"imTip",arrowClassId:"imTipArrow",borderClassId:"imTipArrowBorder"},Show:function(a,b){var c=null,d=!1,e=null,f=null,g=200,h="top",i=!1,j=!1,k=x5engine.utils.createId(x5engine.imTip.constants.classId),l=null,m="",n="";a=_jq(a),a.find("img").length>0&&a.find("img").outerHeight()>a.outerHeight()&&(a=a.find("img")),(_jq(a).attr("id")==""||_jq(a).attr("id")==null)&&_jq(a).attr("id",x5engine.utils.createId(x5engine.imTip.constants.classId+"_target")),b.borderRadius=b.borderRadius||x5engine.settings.imTip.borderRadius,b.classes=b.classes||x5engine.settings.imTip.classes,b.shadow==null&&(b.shadow=x5engine.settings.imTip.shadow),b.arrow==null&&(b.arrow=x5engine.settings.imTip.arrow),b.position=b.position||x5engine.settings.imTip.position,b.effect=b.effect||x5engine.settings.imTip.effect,b.showTail=b.showTail||x5engine.settings.imTip.showTail,b.hideOnFocus==null&&(b.hideOnFocus=!1),b.persistant==null&&(b.persistant=x5engine.settings.imTip.persistant),b.unique==null&&(b.unique=x5engine.settings.imTip.unique),b.text==""||b.text==null?(b.text=a.attr("title"),b.text==null&&(a=a.find("[title]")),a!=null&&(b.text=a.attr("title"))):a.find("[title]").length>0&&(a=a.find("[title]")),n=a.attr("alt"),m=a.attr("title"),a.attr("title","").attr("alt",""),b.text=b.text.replace(/&amp;/g,"&"),b.text=b.text.replace(/&lt;/g,"<"),b.text=b.text.replace(/&gt;/g,">"),b.text=b.text.replace(/&quot;/g,'"');var o=function(){var c=_jq("[tiptarget="+_jq(a).attr("id")+"]");if(c.length==0||c.length>0&&c.html().indexOf(b.text)==-1)b.unique&&_jq("."+x5engine.imTip.constants.classId).length>0&&(_jq("."+x5engine.imTip.constants.classId).remove(),g=0),_jq(a).addClass(x5engine.imTip.constants.locked),d=!1,p();if(b.hideOnFocus!=null)if(typeof b.hideOnFocus=="boolean"&&b.hideOnFocus==1)_jq(a).hasClass("imDatePickerIcon")?(_jq(a).parent().prev("input[type=text]").focus(function(){d=!0,_jq(a).removeClass(x5engine.imForm.constants.mark),u()}),_jq(a).click(function(){_jq(a).parent().prev("input[type=text]").focus()})):_jq(a).click(function(){d=!0,_jq(a).removeClass(x5engine.imForm.constants.mark),u()});else if(typeof b.hideOnFocus=="object"||typeof b.hideOnFocus=="string")_jq(b.hideOnFocus).click(function(){d=!0,_jq(b.hideOnFocus).removeClass(x5engine.imForm.constants.mark),_jq(a).removeClass(x5engine.imForm.constants.mark),u()}),_jq(a).click(function(){d=!0,_jq(a).removeClass(x5engine.imForm.constants.mark),_jq(b.hideOnFocus).removeClass(x5engine.imForm.constants.mark),u()})},p=function(){if(!i){var f=_jq("[tiptarget="+_jq(a).attr("id")+"]");if(f.length==0){var g='<div id="'+k+'_wrapper"><div tiptarget="'+_jq(a).attr("id")+'" class="'+x5engine.imTip.constants.classId+" "+b.classes+'" id="'+k+'">'+b.text+(b.showTail?'<div class="'+x5engine.imTip.constants.borderClassId+'"></div><div class="'+x5engine.imTip.constants.arrowClassId+'"></div>':"")+"</div></div>";_jq("#imPage").append(g),e=_jq("#"+k),i=!0,b.width!=null&&b.width!=undefined&&e.width(b.width),e.find("object").each(function(){e.css({height:Math.max(_jq(this).height(),40)})}),e.fadeOut(0),e.css({zIndex:x5engine.settings.zIndex.tip}),b.arrow||(e.find("."+x5engine.imTip.constants.arrowClassId).fadeOut(),e.find("."+x5engine.imTip.constants.borderClassId).fadeOut()),b.borderRadius!=0&&(e.css("-webkit-border-radius",b.borderRadius),e.css("-moz-border-radius",b.borderRadius),e.css("border-radius",b.borderRadius)),b.shadow&&(e.css("box-shadow","0px 0px 5px #888"),e.css("-webkit-box-shadow","0px 0px 5px #888"),e.css("-moz-box-shadow","0px 0px 5px #888")),_jq(a).mouseleave(t),e.mouseleave(t),e.mouseenter(s),_jq(a).mouseenter(s),clearTimeout(c),d=!1;if(e.find("img").length>0){var h=e.find("img"),j=h.attr("src");h.attr("src","null"),h.load(function(){h.unbind("load");var a=q(b.position,e);r(a,e)}),h.attr("src",j)}else{var l=q(b.position,e);r(l,e)}}else f!=null&&f.html().indexOf(b.text)==-1&&f.find("."+x5engine.imTip.constants.borderClassId).before("<br />"+b.text)}},q=function(c,d,e){var f,g,i=_jq(a).offset(),j=_jq("#imPage").offset();e=e||0,i.top-=_jq(a).scrollTop()+j.top,i.left-=_jq(a).scrollLeft()+j.left;var k=null,l=10;if(b.showTail){var k=d.find("."+x5engine.imTip.constants.arrowClassId).css("border-bottom-width");k=parseInt(k.substring(0,k.length-2));var l=d.find("."+x5engine.imTip.constants.borderClassId).css("border-bottom-width");l=parseInt(l.substring(0,l.length-2))}var m=d.css("background-color");if(e>3){var n=(d.width()-k/3)/2;return d.find("."+x5engine.imTip.constants.arrowClassId).css({borderLeftColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",borderTopColor:m,position:"absolute",left:n,bottom:-2*k+1}),d.find("."+x5engine.imTip.constants.borderClassId).css({borderLeftColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",position:"absolute",left:n,bottom:-2*k}),d.css("position","fixed"),[_jq(window).width()/2,_jq(window).height()/2]}if(c=="top"){h="top";if(i.top-d.outerHeight()-2*k-10-_jq(window).scrollTop()<0)return q("bottom",d,e+1);g=i.left+(_jq(a).outerWidth()-d.outerWidth())/2,f=i.top-d.outerHeight()-2*k,g<0&&(g=10),g+d.outerWidth()>_jq(window).width()&&(g=_jq(window).width()-d.outerWidth()-10);var n=(d.width()-k/3)/2;d.find("."+x5engine.imTip.constants.arrowClassId).css({borderLeftColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",borderTopColor:m,position:"absolute",left:n,bottom:-2*k+1}),d.find("."+x5engine.imTip.constants.borderClassId).css({borderLeftColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",position:"absolute",left:n,bottom:-2*k})}else if(c=="bottom"){h="bottom";if(i.top+_jq(a).outerHeight()+2*k-_jq(window).scrollTop()>_jq(window).height())return q("left",d,e+1);g=i.left+(_jq(a).width()-d.width())/2,f=i.top+_jq(a).outerHeight()+10,g<0&&(g=10),g+d.outerWidth()>_jq(window).width()&&(g=_jq(window).width()-d.outerWidth()-10);var n=(d.width()-k/3)/2;d.find("."+x5engine.imTip.constants.arrowClassId).css({borderLeftColor:"transparent",borderRightColor:"transparent",borderTopColor:"transparent",borderBottomColor:m,position:"absolute",left:n,top:-2*k+1}),d.find("."+x5engine.imTip.constants.borderClassId).css({borderLeftColor:"transparent",borderRightColor:"transparent",borderTopColor:"transparent",position:"absolute",left:n,top:-2*k})}else if(c=="left"){if(i.left-d.outerWidth()-_jq(window).scrollLeft()<0)return q("top",d,e+1);g=i.left-d.outerWidth()-2*k,f=i.top+(_jq(a).outerHeight()-d.outerHeight())/2;if(f-_jq(window).scrollTop()<0)return q("bottom",d,e+1);if(f+d.outerHeight()-_jq(window).scrollTop()>_jq(window).height())return q("top",d,e+1);d.find("."+x5engine.imTip.constants.arrowClassId).css({borderRightColor:"transparent",borderBottomColor:"transparent",borderTopColor:"transparent",borderLeftColor:m,position:"absolute",right:-2*k+1,top:d.outerHeight()/2-k}),d.find("."+x5engine.imTip.constants.borderClassId).css({borderRightColor:"transparent",borderBottomColor:"transparent",borderTopColor:"transparent",position:"absolute",right:-2*k,top:d.outerHeight()/2-k})}else if(c=="right"){if(i.left+_jq(a).outerWidth()+d.outerWidth()-_jq(window).scrollLeft()>_jq(window).width())return q("top",d,e+1);g=i.left+_jq(a).outerWidth()+2*k,f=i.top+(_jq(a).outerHeight()-d.outerHeight())/2;if(f-_jq(window).scrollTop()<0)return q("bottom",d,e+1);if(f+d.outerHeight()-_jq(window).scrollTop()>_jq(window).height())return q("top",d,e+1);d.find("."+x5engine.imTip.constants.arrowClassId).css({borderLeftColor:"transparent",borderBottomColor:"transparent",borderTopColor:"transparent",position:"absolute",borderRightColor:m,left:-2*k+1,top:d.outerHeight()/2-k}),d.find("."+x5engine.imTip.constants.borderClassId).css({borderLeftColor:"transparent",borderBottomColor:"transparent",borderTopColor:"transparent",position:"absolute",left:-2*k,top:d.outerHeight()/2-k})}return[f,g]},r=function(c,d){if(_jq(a).hasClass(x5engine.imTip.constants.locked))switch(b.effect){case"fade":d.css({top:c[0],left:c[1]}),d.fadeIn();break;case"bounce":h=="top"?d.css({top:c[0]-50,left:c[1]}):d.css({top:c[0]+50,left:c[1]}),d.fadeIn(100),d.animate({top:c[0],left:c[1]},600,"imBounce");break;default:d.css({top:c[0],left:c[1]}),g=0,d.fadeIn(0)}},s=function(){clearTimeout(c),d=!1},t=function(){b.persistant||(clearTimeout(c),c=setTimeout(u,250),d=!0)},u=function(){clearTimeout(c),d&&(_jq(a).removeClass(x5engine.imTip.constants.locked),e!=null&&(e.stop(),e.find("object, embed").remove(),e.fadeOut(g,function(){e.remove(),i=!1,_jq(a).attr("title",m),_jq(a).attr("alt",n)})))};return o(),k}}}),_jq.extend(_jq.easing,{imBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c}}),_jq.extend(x5engine,{l10n:{_l10n:[],addLocalization:function(a,b){x5engine.l10n._l10n[a]=b},getLocalization:function(a){return a==null||a==""||x5engine.l10n._l10n[a]==null||x5engine.l10n._l10n[a]=="undefined"||x5engine.l10n._l10n[a]==""?"":x5engine.l10n._l10n[a]}}}),_jq.extend(x5engine,{settings:{imGrid:{enabled:!1},imSound:{idName:"imJSSound"},imCaptcha:{offlineCodes:[]},zIndex:{menu:1e4,datePicker:10201,tip:10221,showBox:10301,splashBox:10401,popup:10501},general:{preview:!0},imShowBox:{background:"black",opacity:.6,border:10,closeImg:"res/imClose.png",loadingImg:"res/imLoad.gif",textColor:"black",boxColor:"white",effect:"fade",shadow:!1,innerBorder:12,allowFrameTransparency:!1},imPopUp:{background:"black",opacity:.6,borderRadius:10,textColor:"black",boxColor:"white",effect:"fade",shadow:!1},imTip:{borderRadius:10,classes:"",shadow:!0,arrow:!0,position:"right",effect:"fade",showTail:!0,persistant:!1,unique:!0},imAdv:{},imAlertBox:{position:"top",sound:"",cookie:!1,image:"",link:""},imSplashBox:{position:"center",sound:"",effect:"none",shadow:!0,margin:0,width:100,height:100,cookie:!1,image:"",link:""},imBlog:{posts:[],posts_month:[],posts_cat:[],posts_ids:[],comments:!1,captcha:!1}}}),_jq.extend(x5engine,{utils:{hex2rgb:function(a,b,c,d){var e=a.replace("#","").match(/(.{2})/g),f=3;while(f--)e[f]=parseInt(e[f],16);b!==null&&(e[0]+=b),c!==null&&(e[1]+=c),d!==null&&(e[2]+=d);for(f=0;f<3;f++)e[f]>255&&(e[f]-=255),e[f]<0&&(e[f]+=255);return"rgb("+e.join(", ")+")"},imFormatInt:function(a){return a<10&&(a="0"+a),a},popup:function(a){var b=new x5engine.utils.Gui;b.showPopUp(a)},Gui:function(){var a=function(a){_jq("#imGuiPopUp").fadeOut(a),_jq("#imGuiPopUpBg").fadeOut(a,function(){_jq("#imGuiPopUp").remove(),_jq("#imGuiPopUpBg").remove()})};this.showPopUp=function(b){b.width=b.width||x5engine.settings.imPopUp.width,b.borderRadius=b.borderRadius||x5engine.settings.imPopUp.borderRadius,b.backGround=b.background||x5engine.settings.imPopUp.background,b.effect=b.effect||x5engine.settings.imPopUp.effect,b.textColor=b.textColor||x5engine.settings.imPopUp.textColor,b.boxColor=b.boxColor||x5engine.settings.imPopUp.boxColor,b.opacity=b.opacity||x5engine.settings.imPopUp.opacity,b.graphics===null&&(b.graphics=!0);if(b.graphics){b.text=b.text.replace(/&amp;/g,"&").replace(/\&gt;/g,">").replace(/\&lt;/g,"<");var c;b.effect!="none"?c=200:c=0,b.shadow===null&&(b.shadow=x5engine.settings.imPopUp.shadow),_jq("#imGuiPopUpBG").remove(),_jq("#imGuiPopUp").remove();var d='<div id="imGuiPopUpBg"></div><div id="imGuiPopUp">'+b.text+'<div id="imCloseButton" class="imGuiButton">OK</div></div>';_jq("body").append(d),_jq("#imGuiPopUpBg").css({zIndex:x5engine.settings.zIndex.popup}),_jq("#imGuiPopUp").css({zIndex:x5engine.settings.zIndex.popup+1}),_jq("#imGuiPopUp").fadeOut(0),b.shadow&&(_jq("#imGuiPopUp"
).css("box-shadow","0px 5px 30px #000"),_jq("#imGuiPopUp").css("-webkit-box-shadow","0px 5px 30px #000"),_jq("#imGuiPopUp").css("-moz-box-shadow","0px 5px 30px #000")),_jq("#imGuiPopUp").css("-moz-border-radius",b.borderRadius+"px"),_jq("#imGuiPopUp").css("-webkit-border-radius",b.borderRadius+"px"),_jq("#imGuiPopUp").css("border-radius",b.borderRadius+"px"),_jq(".imGuiButton").css("-moz-border-radius",b.borderRadius+"px"),_jq(".imGuiButton").css("-webkit-border-radius",b.borderRadius+"px"),_jq(".imGuiButton").css("border-radius",b.borderRadius+"px"),_jq("#imGuiPopUpBg").css({width:_jq(window).width(),height:_jq(window).height()}),_jq("#imGuiPopUp").width(b.width),_jq("#imGuiPopUp").css({position:"fixed",top:(_jq(window).height()-_jq("#imGuiPopUp").outerHeight())/2,left:(_jq(window).width()-_jq("#imGuiPopUp").outerWidth())/2}),_jq("#imGuiPopUpBg").click(function(){a(c)}),_jq("#imCloseButton").click(function(){a(c)}),_jq("#imGuiPopUp").fadeIn(c),_jq("#imGuiPopUpBg").fadeOut(1,function(){_jq("#imGuiPopUpBg").fadeTo(c,b.opacity)})}else alert(b.text.replace(/&amp;/g,"&").replace(/\&gt;/g,">").replace(/\&lt;/g,"<").replace(/<br[\s]*\/>/g,"\n").replace(/<([A-Z][A-Z0-9]*)\b[^>]*\/?>/g,""))},this.removeLabels=function(){_jq(".imGuiLabel").remove()},this.showLabel=function(a){var b=0;while(_jq("#imGuiLabel"+b).length>0)b++;b="imGuiLabel"+b;var c="<div class='imGuiLabel' id='"+b+"'>"+a.text+"</div>";_jq("body").append(c);var d=_jq("#"+b);d.css("box-shadow","0px 0px 7px #aaa"),d.css("-webkit-box-shadow","0px 0px 7px #aaa"),d.css("-moz-box-shadow","0px 0px 7px #aaa"),d.css("-moz-border-radius","3px"),d.css("-webkit-border-radius","3px"),d.css("border-radius","3px");if(a.object!==null){var e=_jq(a.object),f=e.offset(),g=f.top+Math.floor((e.outerHeight()-d.outerHeight())/2);g<0&&(g=0),d.css({position:"absolute",top:g,left:f.left+e.outerWidth()+10})}else{d.css({width:200,height:50,padding:10});var h=d.outerHeight(),i=30;d.css({position:"fixed",bottom:-h,right:i,overflow:"hidden",cursor:"pointer"}),d.animate({bottom:10})}d.fadeTo(300,.8),d.click(function(){d.fadeOut(100,function(){d.remove()})})}},createId:function(a){a=a||"imObj";var b=0;while(_jq("#"+a+b).length>0)b++;return a+b},imGetParameter:function(a){var b="",c=0,d=0;return window.top.location.search!==0&&(b=unescape(window.top.location.search)),a+="=",b.length>0?(c=b.indexOf(a),c!=-1?(c+=a.length,d=b.indexOf("&",c),d==-1&&(d=b.length),b.substring(c,d)):null):null},imPreloadImages:function(a){var b=_jq(window);b.x5ImageCache=[];var c=b.x5ImageCache;for(var d=0;d<a.length;d++)c[d]=new Image,c[d].src=a[d]},imOpenLocation:function(a){document.location=a},imGetLayer:function(a){return _jq(a)},imCodeProtection:function(a){document.oncontextmenu=function(){return alert("Copyrights "+a+". All rights reserved."),!1}},imFocus:function(a,b){_jq(a).css("background-color",b)},imSoundLink:{getMimeType:function(){var a="application/x-mplayer2",b=navigator.userAgent.toLowerCase();if(navigator.mimeTypes&&b.indexOf("windows")==-1){var c=navigator.mimeTypes["audio/mpeg"].enabledPlugin;c&&(a="audio/mpeg")}return a},Play:function(a,b){b==null&&(b=!1),x5engine.utils.imSoundLink.Stop(),_jq("body").append('<embed type="'+x5engine.utils.imSoundLink.getMimeType()+'" style="height:0" id="'+x5engine.settings.imSound.idName+'" src="'+a+'" loop="'+b+'" autostart="true" hidden="true" />')},Stop:function(){_jq("#"+x5engine.settings.imSound.idName).remove()}},imPopUpWin:function(a,b,c,d,e,f){e==undefined&&(e=!1),f==undefined&&(f=1),b==undefined&&(b=""),c==undefined&&(c=-1),d==undefined&&(d=-1);var g;if(e==1)g="";else if(c==-1||d==-1)g="width="+screen.width+",height="+screen.height+",top=0,left=0,scrollbars="+f+",location=no,directories=no,status=no,menubar=no,toolbar=no,resizable=no";else{var h=screen.width?(screen.width-c)/2:100,i=screen.height?(screen.height-d)/2:100;g="width="+c+",height="+d+",top="+i+",left="+h+",scrollbars="+f+",location=no,directories=no,status=no,menubar=no,toolbar=no,resizable=no"}var j=window.open(a,"",g);return j.focus(),!1},switchFocus:function(a){_jq(a).find(":input").each(function(){var a=_jq(this).attr("type");a!="button"&&a!="submit"&&a!="reset"&&(_jq(this).focus(function(){_jq(this).addClass("imFormFocus")}),_jq(this).blur(function(){_jq(this).removeClass("imFormFocus")}))})},isOnline:function(){return window.top.location.href.substring(0,4)=="http"?!0:!1},emailTo:function(a,b){var c="";for(var d=0;d<a.length;d++){var e=parseInt(a.charAt(d),10),f=b.substring(0,e);b=b.substring(e),c=f+c}location.href="mailto:"+c},bookmark:function(a,b){try{if(window.sidebar)window.sidebar.addPanel(b,a,"");else if(window.opera){var c=document.createElement("A");c.rel="sidebar",c.target="_search",c.title=b,c.href=a,c.click()}else document.all?window.external.AddFavorite(a,b):window.open(a)}catch(d){window.open(a)}},setHomepage:function(a,b){if(document.all)try{a.style.behavior="url(#default#homepage)",a.setHomePage(b)}catch(c){window.open(b)}else if(window.sidebar)try{window.netscape&&netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");var d=Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);d.setCharPref("browser.startup.homepage",b)}catch(c){}},location:function(a){window.top.location.href=a},getParam:function(a){var b="",c=0,d=0;return window.top.location.search!=0&&(b=unescape(window.top.location.search)),a+="=",b.length>0?(c=b.indexOf(a),c!=-1?(c+=a.length,d=b.indexOf("&",c),d==-1&&(d=b.length),b.substring(c,d)):null):null},offlineMessageTimeout:null,showOfflineMessage:function(a,b,c){var d=function(){_jq("#imMsgBoxF").height(_jq("#imMsgBox").outerHeight())};if(!x5engine.utils.isOnline()){if(_jq("#imMsgBox").length>0&&_jq("#imMsgBox").html().indexOf(a)!==-1)return!1;_jq("#imMsgBox, #imMsgBoxF").remove(),b=b||"",c=c||"#FFFFE1";var e="z-index: 10200; position: fixed; top: 0; left: 0; right: 0; padding: 8px; background-color: "+c+"; font-family: Tahoma; font-size: 8pt; border-bottom: 1px solid gray;";_jq("#imMsgBox").length==0&&(_jq("body").prepend('<div id="imMsgBoxF">&nbsp;</div>'),_jq("body").prepend('<div id="imMsgBox" style="'+e+'">'+(b!=""?'<img style="float: left;" src="'+b+'" />':"")+'<span style="float: left;">'+a+'</span><span id="imMsgBoxClose" style="float: right; cursor: pointer;"><b>X</b></span></div>')),d(),_jq("#imMsgBox, #imMsgBoxF").fadeOut(0),_jq("#imMsgBox, #imMsgBoxF").slideDown("slow"),_jq(window).unbind("resize",d).resize(d),_jq("#imMsgBoxClose").unbind("click").click(function(){_jq("#imMsgBox, #imMsgBoxF").slideUp("slow",function(){_jq("#imMsgBox, #imMsgBoxF").remove()})})}return!1},alignWelcomePage:function(){var a=function(){var a=_jq(window).height()-_jq("#imCell_1").outerHeight();_jq("#imCell_2").length>0&&(a-=_jq("#imCell_2").outerHeight()),a/=2,a<0&&(a=0),_jq("#imContent").css({marginTop:a})};a(),_jq(window).unbind("resize",a).resize(a)},autoHeight:function(){_jq(".autoHeight").each(function(){_jq(this).height("auto")})},imHash:function(a){var b="QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm1234567890",c="",d=0,e=2;for(var f=a.length-1;f>=0;f--)d+=a.charCodeAt(f)*Math.pow(e,a.length-f);d*=834,d+="";var g=0;while(d.length>0)g+=(parseInt(d.charAt(0))+5)*2,d=d.substr(1),g>b.length-1&&(g-=b.length-1),c+=b.charAt(g);return c},supportsCSS:function(a){var b=document.createElement("div"),c=["Khtml","Ms","O","Moz","Webkit"],d=5;if(a in b.style)return a;a=a.replace(/^[a-z]/,function(a){return a.toUpperCase()});while(d--)if(c[d]+a in b.style)return c[d]+a;return!1},htmlspecialchars_decode:function(a){return a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'")}}}),_jq.extend(x5engine,{youtube:{jsApiIsLoaded:!1,apiLoadedEventName:"youtube_api_loaded"}}),_jq.extend(x5engine,{imGallery:{gallery:function(a){var b=_jq.extend({target:"",media:[],width:400,height:400,guiColor:"#f7f7f7",guiAlpha:.9,backgroundColor:"#f7f7f7",descriptionBackgroundColor:"#444",descriptionColor:"white",descriptionAlpha:.8,descriptionAlignment:"center",fontFamily:"Arial",fontSize:14,autoplay:!1,thumbsPosition:"none",thumbsNumber:4,thumbsSize:20,music:null,showButtons:!0,controlsBarHeight:36,controlsBarImage:"",buttonPlayImage:"",buttonPauseImage:"",buttonNextImage:"",buttonPrevImage:"",random:!1,fullScreen:!1,resFolder:"res"},a),c=_jq(b.target),d=[],e=null,f=null,g=navigator.userAgent.match(/iPad/i)!==null||navigator.userAgent.match(/iPhone/i)!==null||navigator.userAgent.match(/iPod/i)!==null,h=navigator.userAgent.match(/Android/i),j=null,k=null,l=null,m=null,n=!1,o=null,p=null,q=!1,r=null,s=b.thumbsPosition=="bottom"||b.thumbsPosition=="top"?b.width:b.height;s=s%b.thumbsNumber/b.thumbsNumber/2;var t=Math.ceil(b.thumbsSize+2*s),u="autoplay_start",v="autoplay_stop",w=function(a){a.touches.length==1&&(a.preventDefault(),o=a.target,j=a.pageX,k=a.pageY),n=!1},x=function(a){a.touches.length==1&&(a.preventDefault(),n=!0,l=a.pageX,m=a.pageY)},y=function(a){n?(E(),(Math.abs(l-j)>Math.abs(m-k)?l-j:m-k)<0?A():B()):o!==null&&(_jq(o).click(),o=null)},z=function(a,f,h,i){if(a===null||a===undefined||d[a]===null||d[a]===undefined)return!1;if(e===a)return!1;if(f===null||f===undefined)f=!0;if(h===null||h===undefined)h=!1;if(i===null||i===undefined)i=!1;d[a].DOMObject().css("display","none"),e!==null&&e!==undefined?(d[e].DOMObject().after(d[a].DOMObject()),d[e].AnimateOut(J,function(a){a.DOMObject().detach()},h)):J.prepend(d[a].DOMObject()),e=a,d[e].AnimateIn(J,function(){i&&C(e)},h);if(g){var j=d[a].DOMObject();j[0].removeEventListener("touchstart",w),j[0].addEventListener("touchstart",w),j[0].removeEventListener("touchmove",x),j[0].addEventListener("touchmove",x),j[0].removeEventListener("touchend",y),j[0].addEventListener("touchend",y)}var k=d[e].GetDescription();k!==null&&k!==undefined&&k!==""?(p===null&&(p=_jq(document.createElement("div")),p.attr("id",c.attr("id")+"_description"),J.append(p),p.css({position:"absolute",left:0,right:0,bottom:0,"background-color":"black",display:"none",color:b.descriptionColor,"text-align":b.descriptionAlignment,padding:2,"font-family":b.fontFamily,"font-size":b.fontSize})),p.stop(!1,!1).fadeOut(250,function(){p.html(k.replace(/\n/g,"<br />")),f&&p.stop(!1,!1).fadeTo(250,b.descriptionAlpha)}),g||J.mouseenter(function(){p!==null&&p.stop(!1,!1).fadeOut(250)}).mouseleave(function(){p!==null&&p.stop(!1,!1).fadeTo(250,b.descriptionAlpha)})):p!==null&&p.stop(!1,!1).fadeOut(250,function(){p.detach(),p=null})},A=function(){var a=e;if(++a>=d.length||d[a]===null||d[a]===undefined)a=0;z(a,(g||q)&&(L===null||L===undefined||L.css("display")=="none"),!1,!0)},B=function(){var a=e;if(--a<0||d[a]===null||d[a]===undefined)a=d.length-1;z(a,(g||q)&&(L===null||L===undefined||L.css("display")=="none"),!0,!0)},C=function(a){if(b.thumbsPosition!=="embed"&&b.thumbsPosition!=="none"&&b.thumbsNumber>=d.length)return!1;if(b.thumbsPosition=="embed"&&cb/b.thumbsSize>=d.length)return!1;Q!==null&&Q!==undefined&&(b.thumbsPosition!=="embed"?(b.thumbsPosition==="top"||b.thumbsPosition==="bottom"?a=t*(a+1)-K.width()/2:a=t*(a+1)-K.height()/2,mod=Math.abs(a%t)):(a=b.thumbsSize*(a+1)-K.width()/2,mod=Math.abs(a%b.thumbsSize)),mod>t/2?a-=mod:a+=mod,b.thumbsPosition==="top"||b.thumbsPosition==="bottom"||b.thumbsPosition==="embed"?Q.stop(!1,!1).animate({left:Math.min(0,Math.max(-a,-Q.width()+K.width()))}):Q.stop(!1,!1).animate({top:Math.min(0,Math.max(-a,-Q.height()+K.height()))}))},D=function(){return E(),G(),r=setTimeout(function(){A(),D()},d[e].AutoplayTime()),q=!0,I.trigger(u),!0},E=function(){return H(),r!==null&&(clearTimeout(r),r=null,d[e].StopVideo()),q=!1,I.trigger(v),!0},F=function(a){if(b.media[a]===undefined||b.media[a]===null){f!==null&&(f.remove(),f=null),b.thumbsPosition==="bottom"||b.thumbsPosition==="top"?Q.width(d.length*t):b.thumbsPosition!=="embed"&&b.thumbsPosition!=="none"&&Q.height(d.length*t);return}a===0&&J.css({"background-image":"url('res/imLoad.gif')","background-position":"center center","background-repeat":"no-repeat"}),b.media[a].showControls=b.media[a].showControls||g,b.media[a].touchDevice=g,b.media[a].android=h,b.media[a].contentWidth=J.width(),b.media[a].contentHeight=J.height();var c=d.length,e=new x5engine.imGallery.mediaObject(b.media[a]);e.Cache({load:function(e){d[c]=e,c===0&&(J.css("background-image","none"),f===null&&Q!==null&&Q!==undefined&&(f=_jq(document.createElement("div")),f.css({"float":"left","background-image":"url('"+b.resFolder+"/imLoad.gif')","background-position":"center center","background-repeat":"no-repeat"}).width(b.thumbsSize).height(b.thumbsSize),Q.append(f)),z(0),b.autoplay===!0&&D());var h=e.GetThumb();h.click(function(){E(),z(c,b.thumbsPosition!=="embed"||g)}).css({"float":"left",display:"none",cursor:"pointer"}).width(b.thumbsSize).height(b.thumbsSize),b.thumbsPosition=="bottom"||b.thumbsPosition=="top"?h.css("margin","0 "+Math.ceil(s)+"px 0 "+Math.floor(s)+"px"):(b.thumbsPosition=="left"||b.thumbsPosition=="right")&&h.css("margin",Math.ceil(s)+"px 0 "+Math.floor(s)+"px 0"),b.thumbsPosition==="embed"&&h.mouseenter(function(){_jq(".im-big-thumb").remove();var a=h.offset();a=a.left;var c=J.offset();a-=c.left;var d=_jq(document.createElement("img"));d.addClass("im-big-thumb"),J.append(d),d.attr("src",h.attr("src")).css({position:"absolute",display:"none",bottom:b.controlsBarHeight}).css("left",a+(b.thumbsSize-d.width())/2).fadeIn(250),h.unbind("mouseleave").mouseleave(function(){d!==null&&d.stop(!1,!1).fadeOut(250,function(){d.remove()})})}),b.thumbsPosition==="bottom"||b.thumbsPosition==="top"?Q.width((d.length+1)*t):b.thumbsPosition==="bottom"&&Q.height((d.length+1)*t),f!==null?f.before(h):Q!==null&&Q!==undefined&&Q.append(h),h.fadeIn(),F(a+1)},error:function(b,c){delete e,delete b,F(a+1)}})},G=function(){var a=document.getElementById(hb);a!==undefined&&a!==null&&(a.playFlash!==undefined?a.playFlash():a.play!==undefined&&a.play())},H=function(){var a=document.getElementById(hb);a!==undefined&&a!==null&&(a.pauseFlash!==undefined?a.pauseFlash():a.pause!==undefined&&a.pause())},I=_jq(document.createElement("div")).css({position:"relative","background-color":b.backgroundColor}).width(b.width).height(b.height),J=_jq(document.createElement("div")).css({overflow:"hidden",position:"absolute",top:b.thumbsPosition!=="top"?"0":"auto",bottom:b.thumbsPosition!=="bottom"?"0":"auto",left:b.thumbsPosition!=="left"?"0":"auto",right:b.thumbsPosition!=="right"?"0":"auto"});J.width(b.thumbsPosition=="right"||b.thumbsPosition=="left"?b.width-b.thumbsSize:b.width),J.height(b.thumbsPosition=="top"||b.thumbsPosition=="bottom"?b.height-b.thumbsSize:b.height);var K=_jq(document.createElement("div"));I.append(J),b.thumbsPosition!=="embed"&&I.append(K),c.empty().append(I).css("position","relative");var L=null;if((b.showButtons===!0||b.showButtons==="outside")&&!g){L=_jq(document.createElement("div")),L.css({position:"absolute",top:b.showButtons==="outside"?J.height():"auto",bottom:b.showButtons==="outside"?"auto":0,left:0,right:0,"background-color":b.guiColor,"background-image":b.controlsBarImage!==""&&b.controlsBarImage!==undefined&&b.controlsBarImage!==null?"url('"+b.controlsBarImage+"')":"none",display:b.showButtons==="outside"?"block":"none",height:b.controlsBarHeight}),b.showButtons==="outside"?J.after(L):J.append(L);var M=null;b.buttonPrevImage===""||b.buttonPrevImage===null||b.buttonPrevImage===undefined?(M=_jq(document.createElement("div")),M.css({width:1,height:1,"background-color":"transparent","border-width":12,"border-style":"solid","border-color":"transparent "+x5engine.utils.hex2rgb(b.guiColor,128,128,128)+" transparent transparent",position:"absolute",left:5,top:(b.controlsBarHeight-24)/2,cursor:"pointer","border-radius":3,"-moz-border-radius":3,"-webkit-border-radius":3})):(M=_jq(document.createElement("img")),M.attr("src",b.buttonPrevImage).css({position:"absolute",left:5,top:(b.controlsBarHeight-24)/2,cursor:"pointer"})),M.click(function(a){a.preventDefault(),E(),B()}),L.append(M);var N=null;b.buttonNextImage===""||b.buttonNextImage===null||b.buttonNextImage===undefined?(N=_jq(document.createElement("div")),N.css({width:1,height:1,"background-color":"transparent","border-width":12,"border-style":"solid","border-color":"transparent transparent transparent "+x5engine.utils.hex2rgb(b.guiColor,128,128,128),position:"absolute",right:5,top:(b.controlsBarHeight-24)/2,cursor:"pointer","border-radius":3,"-moz-border-radius":3,"-webkit-border-radius":3})):(N=_jq(document.createElement("img")),N.attr("src",b.buttonNextImage).css({position:"absolute",right:5,top:(b.controlsBarHeight-24)/2,cursor:"pointer"})),N.click(function(a){a.preventDefault(),E(),A()}),L.append(N);var O=function(){var a=null;b.buttonPlayImage===""||b.buttonPlayImage===undefined||b.buttonPlayImage===null?(a=_jq(document.createElement("div")),a.css({"background-color":"transparent","border-style":"solid"}),q?a.css({position:"static",margin:"4px 7px","border-width":"0 3px 0 3px","border-color":x5engine.utils.hex2rgb(b.guiColor,128,128,128),"border-radius":0,"-moz-border-radius":0,"-webkit-border-radius":0}).width(4).height(16):a.css({margin:"2px "+P.height()/3+"px","border-width":10,"border-color":"transparent transparent transparent "+x5engine.utils.hex2rgb(b.guiColor,128,128,128),"border-radius":3,"-moz-border-radius":3,"-webkit-border-radius":3}).width(1).height(1)):(a=_jq(document.createElement("img")),q?a.attr("src",b.buttonPauseImage):a.attr("src",b.buttonPlayImage)),P.empty().append(a)},P=null;b.buttonPlayImage===null||b.buttonPlayImage===undefined||b.buttonPlayImage===""?(P=_jq(document.createElement("div")),P.css({width:24,height:24,"background-color":"transparent","border-width":1,"border-style":"solid","border-color":x5engine.utils.hex2rgb(b.guiColor,128,128,128),position:"absolute",left:45,top:(b.controlsBarHeight-24)/2,cursor:"pointer","border-radius":3,"-moz-border-radius":3,"-webkit-border-radius":3,overflow:"hidden"})):(P=_jq(document.createElement("div")),P.attr("src",b.buttonPlayImage).css({position:"absolute",left:45,top:(b.controlsBarHeight-20)/2,cursor:"pointer"})),P.click(function(a){a.preventDefault(),q?E():D()}),O(),I.bind(u,O).bind(v,O),L.append(P),b.thumbsPosition==="embed"&&K!==null&&K!==undefined&&L.append(K),b.showButtons!=="outside"&&J.mouseenter(function(){L.stop(!1,!1).fadeTo(250,b.guiAlpha)}).mouseleave(function(){L.stop(!1,!1).fadeOut(250)})}var Q=null;switch(b.thumbsPosition){case"top":case"bottom":case"left":case"right":K.css({overflow:"hidden",position:"absolute",top:b.thumbsPosition!=="bottom"?0:"auto",bottom:b.thumbsPosition!=="top"?0:"auto",left:b.thumbsPosition!=="right"?0:"auto",right:b.thumbsPosition!=="left"?0:"auto"}),K.width(b.thumbsPosition==="bottom"||b.thumbsPosition==="top"?b.width:b.thumbsSize),K.height(b.thumbsPosition==="bottom"||b.thumbsPosition==="top"?b.thumbsSize:b.height),Q=_jq(document.createElement("div")),K.append(Q),b.thumbsPosition!=="bottom"&&b.thumbsPosition!=="top"?Q.width(b.thumbsSize):(b.thumbsPosition==="bottom"||b.thumbsPosition==="top")&&Q.height(b.thumbsSize),Q.css({position:"absolute",top:0,left:0});var R=K.offset(),S=K.width(),T=K.height(),U=b.thumbsNumber*t;if(!g){if(b.media.length>b.thumbsNumber)if(b.thumbsPosition==="top"||b.thumbsPosition==="bottom"){var V=_jq(document.createElement("div"));K.append(V),V.width(22).css({"background-image":"url('"+b.resFolder+"/imArrL.gif')","background-repeat":"no-repeat","background-position":"-6px center",cursor:"pointer","background-color":"white",border:"1px solid #eee",left:0,top:0,bottom:0,position:"absolute"}).fadeOut(0).click(function(){var a=Q.css("left").replace(/px/g,"")*1;Q.animate({left:Math.min(0,a+U)})});var W=_jq(document.createElement("div"));K.append(W),W.width(22).css({"background-image":"url('"+b.resFolder+"/imArrR.gif')","background-repeat":"no-repeat","background-position":"6px center",cursor:"pointer","background-color":"white",border:"1px solid #eee",right:0,top:0,bottom:0,position:"absolute"}).fadeOut(0).click(function(){var a=Q.css("left").replace(/px/g,"")*1;Q.animate({left:Math.max(-Q.width()+S,a-U)})}),K.mouseenter(function(){V.stop(!1,!1).fadeTo(250,.925),W.stop(!1,!1).fadeTo(250,.925)}).mouseleave(function(){V.stop(!1,!1).fadeOut(250),W.stop(!1,!1).fadeOut(250)})}else{var X=_jq(document.createElement("div"));K.append(X),X.height(22).css({"background-image":"url('"+b.resFolder+"/imArrT.gif')","background-repeat":"no-repeat","background-position":"center -6px",border:"1px solid #eee",cursor:"pointer","background-color":"white",left:0,right:0,top:0,position:"absolute"}).fadeOut(0).click(function(){var a=Q.css("top").replace(/px/g,"")*1;Q.animate({top:Math.min(0,a+U)})});var Y=_jq(document.createElement("div"));K.append(Y),Y.height(22).css({"background-image":"url('"+b.resFolder+"/imArrB.gif')","background-repeat":"no-repeat","background-position":"center 6px",cursor:"pointer","background-color":"white",border:"1px solid #eee",right:0,left:0,bottom:0,position:"absolute"}).fadeOut(0).click(function(){var a=Q.css("top").replace(/px/g,"")*1;Q.animate({top:Math.max(-Q.height()+T,a-U)})}),K.mouseenter(function(){X.stop(!1,!1).fadeTo(250,.925),Y.stop(!1,!1).fadeTo(250,.925)}).mouseleave(function(){X.stop(!1,!1).fadeOut(250),Y.stop(!1,!1).fadeOut(250)})}}else{var Z=null,$=null,_=!1,ab=null,bb=0;K[0].addEventListener("touchstart",function(a){Q.stop(!0,!1),a.touches.length==1&&(a.preventDefault(),ab=a.target,Z=a.pageX,$=a.pageY),_=!1}),K[0].addEventListener("touchmove",function(a){a.preventDefault();if(a.touches.length==1){var c=a.touches[0];_=!0,Q.stop(!0,!1);if(b.thumbsPosition==="top"||b.thumbsPosition==="bottom"){var d=Math.round(Q[0].style.left.replace(/px/g,"")*1);bb=Z-c.pageX;if(d-bb>0||d-bb<-Q.width()+S)bb/=2;Q.css({left:d-bb}),Z=c.pageX}else{var e=Q.css("top").replace(/px/g,"")*1;bb=$-c.pageY;if(e-bb>0||e-bb<-Q.height()+T)bb/=2;Q.css({top:e-bb}),$=c.pageY}}}),K[0].addEventListener("touchend",function(a){if(!_)ab!==null&&(_jq(ab).click(),ab=null);else{var c;Q.stop(!0,!1);if(b.thumbsPosition==="top"||b.thumbsPosition==="bottom"){var e=0;d.length>b.thumbsNumber&&(e=Q.css("left").replace(/px/g,"")*1,e=Math.max(-Q.width()+S,Math.min(0,e-bb*10))),e!==-Q.width()+S&&e!==0&&(c=Math.abs(e%t),c>t/2?e-=t-c:e+=c),Q.animate({left:e},{duration:1e3,easing:"iOsSwing"})}else{var f=0;d.length>b.thumbsNumber&&(f=Q.css("top").replace(/px/g,"")*1,f=Math.max(-Q.height()+T,Math.min(0,f-bb*10))),f!==-Q.height()+T&&f!==0&&(c=Math.abs(f%t),c>t/2?f-=t-c:f+=c),Q.animate({top:f},{duration:1e3,easing:"iOsSwing"})}bb=0}})}break;case"embed":if(b.showButtons){var cb=b.width-200;cb-=cb%b.thumbsSize;var db=(b.width-cb)/2;if(cb>0){K.css({overflow:"hidden",position:"absolute",height:b.thumbsSize,top:(b.controlsBarHeight-b.thumbsSize)/2,bottom:0,left:db,right:db,"background-color":"#444"}),Q=_jq(document.createElement("div")),Q.css({position:"absolute",top:0,left:0}).width(b.thumbsSize*b.media.length),K.append(Q);if(cb/b.thumbsSize<b.media.length&&!g){var eb=_jq(document.createElement("div"));L.append(eb),eb.css({position:"absolute",top:(b.controlsBarHeight-b.thumbsSize)/2+2,height:0,"border-width":b.thumbsSize/2-2,"border-color":"transparent "+x5engine.utils.hex2rgb(b.guiColor,128,128,128)+" transparent transparent","border-style":"solid",width:0,cursor:"pointer",left:db-b.thumbsSize+1,"border-radius":3,"-moz-border-radius":3,"-webkit-border-radius":3}).click(function(){var a=Q.css("left").replace(/px/g,"")*1;Q.animate({left:Math.min(0,a+K.width())})});var fb=_jq(document.createElement("div"));L.append(fb),fb.css({position:"absolute",top:(b.controlsBarHeight-b.thumbsSize)/2+2,height:0,"border-width":b.thumbsSize/2-2,"border-color":"transparent transparent transparent "+x5engine.utils.hex2rgb(b.guiColor,128,128,128),"border-style":"solid",width:0,cursor:"pointer",right:db-b.thumbsSize+1,"border-radius":3,"-moz-border-radius":3,"-webkit-border-radius":3}).click(function(){var a=Q.css("left").replace(/px/g,"")*1;Q.animate({left:Math.max(-Q.width()+K.width(),a-K.width())})})}}}break;default:}var gb=null,hb="imaudioplayer"+Math.round(Math.random()*1e8);if(b.music!==null&&b.music!==undefined){var ib={},jb=!1,kb="",lb="";gb=document.createElement("audio");if(typeof b.music=="string"){kb=b.music.lastIndexOf(".")+1,lb="audio/"+b.music.substring(kb,b.music.length),jb=gb.canPlayType!==undefined&&gb.canPlayType(lb+';codecs="vorbis,1,mp4a.40.2"')==="probably";if(lb==="audio/flv"||lb==="audio/mp3"||jb)ib[lb]=b.music}else if(typeof b.music=="object")for(i=0,url=b.music[i];i<b.music.length;i++){kb=b.music[i].lastIndexOf(".")+1,lb="audio/"+b.music[i].substring(kb,b.music[i].length),jb=audio.canPlayType!==undefined&&audio.canPlayType(lb+';codecs="vorbis,1,mp4a.40.2"')==="probably";if(lb==="audio/flv"||lb==="audio/mp3"||jb)ib[lb]=b.music[i]}if(jb){gb=_jq(gb),gb.attr({loop:"loop",preload:"auto",id:hb});for(lb in ib){var mb=_jq(document.createElement("source"));mb.attr({type:lb,src:ib[lb]}),gb.append(mb)}I.append(gb)}else if(ib["audio/mp3"]!==undefined||ib["audio/flv"]!==undefined||ib["audio/mp4"]!==undefined){_jq(gb).remove(),gb=document.createElement("div"),_jq(gb).attr("id",hb),I.append(gb);var nb={externalInterface:"true",cWidth:"1",cHeight:"1",fileName:ib["audio/mp3"]!==undefined?ib["audio/mp3"]:ib["audio/mp4"]!==undefined?ib["audio/mp4"]:ib["audio/flv"],guiColor:"0x000000",showControls:"true",autoHideControls:"false",autoplay:"false",cpindex:"8729830"},ob={quality:"high",bgcolor:"#ffffff",play:"true",loop:"true",wmode:"transparent",scale:"noscale",menu:"true",devicefont:"false",salign:"lt",allowscriptaccess:"always",allowFullScreen:"true"},pb={id:hb,name:hb,align:"middle",allowscriptaccess:"always"};swfobject.embedSWF("res/imSound.swf?no_cache="+Math.round(Math.random()*1e8),hb,"1","1","10.0.0","res/expressInstall.swf",nb,ob,pb)}}if(b.random){var qb=b.media,rb,sb;for(i=qb.length;i;rb=Math.round(Math.random()*i),sb=qb[--i],qb[i]=qb[rb],qb[rb]=sb);b.medias=qb}F(0)}}}),_jq.extend(_jq.easing,{iOsSwing:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},elasticIn:function(a,b,c,d,e){var f=1.70158,g=0,h=d;return b===0?c:(b/=e)==1?c+d:(g||(g=e*.3),h<Math.abs(d)?(h=d,f=g/4):f=g/(2*Math.PI)*Math.asin(d/h),h*Math.pow(2,-11*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c)},elasticOut:function(a,b,c,d,e){var f=1.70158,g=0,h=d;return b===0?c:(b/=e)===1?c+d:(g||(g=e*.3),h<Math.abs(d)?(h=d,f=g/4):f=g/(2*Math.PI)*Math.asin(d/h),-(h*Math.pow(2,11*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c)},bounceIn:function(a,b,c,d,e){return d-jQuery.easing.bounceOut(a,e-b,0,d,e)+c},bounceOut:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c}}),_jq.extend(x5engine.imGallery,{effects:{none:{animateIn:function(a,b,c,d,e){var f=a.DOMObject();c=_jq(c),f.width(b.width).height(b.height),f.css({position:"absolute",top:b.y,left:b.x}),f.stop(!1,!1).show(0),_jq.isFunction(d)&&d(a)},animateOut:function(a,b,c,d){var e=a.DOMObject();_jq.isFunction(c)&&c(a)}},fade:{animateIn:function(a,b,c,d,e){var f=a.DOMObject();c=_jq(c),f.width(b.width).height(b.height),f.css({position:"absolute",top:b.y,left:b.x,display:"none"}),f.stop(!1,!1).fadeIn(500,function(){_jq.isFunction(d)&&d(a)})},animateOut:function(a,b,c,d){var e=a.DOMObject();e.stop(!1,!1).fadeOut(500,function(){_jq.isFunction(c)&&c(a)})}},horizontalSlide:{animateIn:function(a,b,c,d,e){var f=a.DOMObject();c=_jq(c),f.width(b.width).height(b.height),f.css({position:"absolute",top:b.y,left:e?-b.width:c.width()}),f.show(0),f.stop(!1,!1).animate({left:b.x},{duration:500,complete:function(){_jq.isFunction(d)&&d(a)}})},animateOut:function(a,b,c,d){var e=a.DOMObject();b=_jq(b),e.stop(!1,!1).animate({left:d?b.width():-e.width()},{duration:500,complete:function(){_jq.isFunction(c)&&c(a)}})}},verticalSlide:{animateIn:function(a,b,c,d,e){var f=a.DOMObject();c=_jq(c),f.width(b.width).height(b.height),f.css({position:"absolute",left:b.x,top:e?c.height():-b.height}),f.show(0),f.stop(!1,!1).animate({top:b.y},{duration:500,complete:function(){_jq.isFunction(d)&&d(a)}})},animateOut:function(a,b,c,d){var e=a.DOMObject();b=_jq(b),e.stop(!1,!1).animate({top:d?-a.Height():b.height()},{duration:500,complete:function(){_jq.isFunction(c)&&c(a)}})}},zoom:{animateIn:function(a,b,c,d,e){var f=a.DOMObject();c=_jq(c),f.css({position:"absolute",top:c.height()/2,left:c.width()/2}).width(1).height(1),f.fadeIn(0),f.stop(!1,!1).animate({top:b.y,left:b.x,width:b.width,height:b.height},{duration:500,complete:function(){_jq.isFunction(d)&&d(a)}})},animateOut:function(a,b,c,d){var e=a.DOMObject();b=_jq(b),e.stop(!1,!1).animate({top:b.height()/2,left:b.width()/2,width:1,height:1},{duration:500,complete:function(){_jq.isFunction(c)&&c(a)}})}},elasticFromTop:{animateIn:function(a,b,c,d,e){var f=a.DOMObject();c=_jq(c),f.width(b.width).height(b.height),f.css({position:"absolute",left:b.x,top:e?c.height():-b.height}),f.show(0),f.stop(!1,!1).animate({top:b.y},{easing:"elasticIn",duration:1500,complete:function(){_jq.isFunction(d)&&d(a)}})},animateOut:function(a,b,c,d){var e=a.DOMObject();b=_jq(b),e.stop(!1,!1).fadeOut(500,function(){_jq.isFunction(c)&&c(a)})}},elasticFromBottom:{animateIn:function(a,b,c,d,e){var f=a.DOMObject();c=_jq(c),f.width(b.width).height(b.height),f.css({position:"absolute",left:b.x,top:e?-b.height:c.height()}),f.show(0),f.stop(!1,!1).animate({top:b.y},{easing:"elasticIn",duration:500,complete:function(){_jq.isFunction(d)&&d(a)}})},animateOut:function(a,b,c,d){var e=a.DOMObject();b=_jq(b),e.stop(!1,!1).fadeOut(500,function(){_jq.isFunction(c)&&c(a)})}},elasticFromLeft:{animateIn:function(a,b,c,d,e){var f=a.DOMObject();c=_jq(c),f.width(b.width).height(b.height),f.css({position:"absolute",top:b.y,left:e?c.width():-b.width}),f.show(0),f.stop(!1,!1).animate({left:b.x},{duration:1500,easing:"elasticIn",complete:function(){_jq.isFunction(d)&&d(a)}})},animateOut:function(a,b,c,d){var e=a.DOMObject();b=_jq(b),e.stop(!1,!1).animate({left:d?-e.width():b.width()},{duration:1500,easing:"elasticIn",complete:function(){_jq.isFunction(c)&&c(a)}})}},elasticFromRight:{animateIn:function(a,b,c,d,e){var f=a.DOMObject();c=_jq(c),f.width(b.width).height(b.height),f.css({position:"absolute",top:b.y,left:e?-b.width:c.width()}),f.show(0),f.stop(!1,!1).animate({left:b.x},{duration:1500,easing:"elasticIn",complete:function(){_jq.isFunction(d)&&d(a)}})},animateOut:function(a,b,c,d){var e=a.DOMObject();b=_jq(b),e.stop(!1,!1).animate({left:d?b.width():-e.width()},{duration:1500,easing:"elasticIn",complete:function(){_jq.isFunction(c)&&c(a)}})}},bounceFromRight:{animateIn:function(a,b,c,d,e){var f=a.DOMObject();c=_jq(c),f.width(b.width).height(b.height),f.css({position:"absolute",top:b.y,left:e?-b.width:c.width()}),f.show(0),f.stop(!1,!1).animate({left:b.x},{duration:1e3,easing:"bounceOut",complete:function(){_jq.isFunction(d)&&d(a)}})},animateOut:function(a,b,c,d){var e=a.DOMObject();b=_jq(b),e.stop(!1,!1).animate({left:d?b.width():-e.width()},{duration:1e3,easing:"bounceOut",complete:function(){_jq.isFunction(c)&&c(a)}})}},bounceFromLeft:{animateIn:function(a,b,c,d,e){var f=a.DOMObject();c=_jq(c),f.width(b.width).height(b.height),f.css({position:"absolute",top:b.y,left:e?c.width():-b.width}),f.show(0),f.stop(!1,!1).animate({left:b.x},{duration:1e3,easing:"bounceOut",complete:function(){_jq.isFunction(d)&&d(a)}})},animateOut:function(a,b,c,d){var e=a.DOMObject();b=_jq(b),e.stop(!1,!1).animate({left:d?-e.width():b.width()},{duration:1e3,easing:"bounceOut",complete:function(){_jq.isFunction(c)&&c(a)}})}},bounceFromTop:{animateIn:function(a,b,c,d,e){var f=a.DOMObject();c=_jq(c),f.width(b.width).height(b.height),f.css({position:"absolute",left:b.x,top:e?c.height():-b.height}),f.show(0),f.stop(!1,!1).animate({top:b.y},{easing:"bounceOut",duration:1500,complete:function(){_jq.isFunction(d)&&d(a)}})},animateOut:function(a,b,c,d){var e=a.DOMObject();b=_jq(b),e.stop(!1,!1).animate({top:d?-e.height():b.height()},{duration:1500,easing:"bounceOut",complete:function(){_jq.isFunction(c)&&c(a)}})}},bounceFromBottom:{animateIn:function(a,b,c,d,e){var f=a.DOMObject();c=_jq(c),f.width(b.width).height(b.height),f.css({position:"absolute",left:b.x,top:e?-b.height:c.height()}),f.show(0),f.stop(!1,!1).animate({top:b.y},{easing:"bounceOut",duration:1500,complete:function(){_jq.isFunction(d)&&d(a)}})},animateOut:function(a,b,c,d){var e=a.DOMObject();b=_jq(b),e.stop(!1,!1).animate({top:d?b.height():-e.height()},{duration:1500,easing:"bounceOut",complete:function(){_jq.isFunction(c)&&c(a)}})}},rotateLinear:{animateIn:function(a,b,c,d,e){var f=a.DOMObject(),g=x5engine.utils.supportsCSS("transform"),h=x5engine.utils.supportsCSS("transformOrigin");if(g&&h){f.stop(!1,!1).css({top:b.y,left:b.x,"-my-anim-step":0}).width(b.width).height(b.height);var i=e?-90:90
;f.css(h,"0% 0%").fadeIn(0),f.animate({"-my-anim-step":100},{step:function(a,b){f.css(g,"rotate("+Math.floor(i-i*a/100)+"deg)")},complete:function(){_jq.isFunction(d)&&d(a)}})}else x5engine.imGallery.effects.fade.animateIn(a,b,c,d,e)},animateOut:function(a,b,c,d){var e=a.DOMObject(),f=x5engine.utils.supportsCSS("transform"),g=x5engine.utils.supportsCSS("transformOrigin");if(f&&g){e.stop(!1,!1).css("-my-anim-step",0);var h=d?90:-90;e.css(g,"0% 0%").fadeIn(0),e.animate({"-my-anim-step":100},{step:function(a,b){e.css(f,"rotate("+Math.floor(h*a/100)+"deg)")},complete:function(){_jq.isFunction(c)&&c(a)}})}else x5engine.imGallery.effects.fade.animateOut(a,b,c,d)}}}}),_jq.extend(x5engine.imGallery,{mediaObject:function(a){var b=_jq.extend({width:400,height:400,contentWidth:400,contentHeight:400,type:"image",showVideoControls:!1,url:null,effect:"fade",link:null,description:"",thumb:null,moves:[],autoplayTime:5e3,touchDevice:!1,android:!1},a),c=_jq(window),d=_jq(document),e="id"+Math.round(Math.random()*1e8);c.imageCache=[];var f=c.imageCache[e]=[],g=null,h=null,i=this,j=0,k=0,l=null,m=!0,n=function(){g!==null&&(g.remove(),g=null);var a="imvideoplayer_"+Math.round(Math.random()*1e8),c=null;switch(b.type){case"video":var d=!1,e=document.createElement("video"),f={};if(typeof b.url=="string"){var i="video/"+b.url.substring(b.url.length-3,b.url.length);d=e.canPlayType!==undefined&&e.canPlayType(i+';codecs="theora, vorbis,avc1.4D401E, mp4a.40.2, vp8.0"')==="probably";if(i==="video/flv"||i==="video/mp4"||d)f[i]=b.url}else if(typeof b.url=="object")for(var j=0,k=b.url[j];j<b.url.length;j++){var n=_jq(document.createElement("source"));d=e.canPlayType!==undefined&&e.canPlayType(n.type+';codecs="theora, vorbis,avc1.4D401E, mp4a.40.2, vp8.0"')==="probably",k.type!==undefined&&k.type!==null&&(k.type==="video/flv"||k.type==="video/mp4"||d)&&(f[k.type]=k.src)}g=_jq(document.createElement("div")),g.width(b.width).height(b.height).css({"background-color":"black",cursor:"pointer"}).attr({"data-width":b.width,"data-height":b.height});if(d){var p=null,q=null;g.bind("animate_out_start",function(){q!==null&&q!==undefined&&q.length>0&&(q.remove(),q=null),p!==null&&p.paused!==!0&&p.pause()}),g.bind("animate_in_end",function(){g.empty(),e=_jq(document.createElement("video"));for(var a in f){var c=_jq(document.createElement("source"));c.attr({src:f[a],type:a}),e.append(c)}g.width(b.width).height(b.height).attr({cursor:"pointer"}).append(e),e.width(b.width).height(b.height).attr({autoplay:!1,controls:b.showVideoControls,height:b.height,width:b.width,loop:!1,preload:"none"}),p=e[0],v()});var r=null,s=function(){p.removeEventListener("canplaythrough",s,!1),p.removeEventListener("load",s,!1),u(),p.play()},t=function(){u(),e!==null&&e!==undefined&&e.length>0&&(r=_jq(document.createElement("span")),r.html("Buffering..."),r.css({padding:5,"font-family":"Arial","background-color":"gray",color:"white",position:"absolute",top:-1,left:0,"border-radius":"0 0 5px 0",display:"block"}),e.after(r))},u=function(){r!==null&&r!==undefined&&r.length>0&&(r.remove(),r=null)},v=function(){q=_jq(document.createElement("div"));var a=_jq(document.createElement("div"));q.css({"background-color":"transparent","border-style":"solid","border-radius":"10px",position:"absolute",top:(g.height()-80)/2,left:(g.width()-80)/2}).width(80).height(80),e[0].paused?a.css({"border-color":"transparent transparent transparent #888","border-width":"34px 0 35px 49px",margin:"2px 0 0 3px"}).width(1).height(1):a.css({"border-color":"transparent #888 transparent #888","border-width":"0 15px 0 15px",margin:"3px 0 0 2px"}).width(16).height(70),a.css({"border-style":"solid",top:2.5,left:15,position:"absolute"}),q.append(a),q.fadeOut(0),g.append(q),q.fadeTo(250,.8)},w=function(){q!==null&&q!==undefined&&q.length>0&&q.fadeOut(250,function(){_jq(this).remove()})},x=function(){p.readyState!==4?(p.addEventListener("load",s,!1),p.addEventListener("canplaythrough",s,!1),t(),setTimeout(function(){p.pause()},1)):u()};g.click(function(a){w(),a.preventDefault(),p.play!==undefined&&(p.paused!==!0?(u(),p.pause(),v()):(p.removeEventListener("onreadystatechange",x,!1),p.addEventListener("onreadystatechange",x,!1),p.play(),x()))}),b.touchDevice||g.mouseenter(function(){e[0].paused||v()}).mouseleave(function(){e[0].paused||w()})}else f["video/flv"]!==undefined||f["video/mp4"]!==undefined?(m=!1,c=_jq(document.createElement("div")),c.attr("id",a),g.append(c),g.bind("animate_in_end",function(){var c={cWidth:b.width,cHeight:b.height,fileName:"../"+(f["video/flv"]!==undefined?f["video/flv"]:f["video/mp4"]),guiColor:"0x000000",showControls:"false",autoHideControls:"false",autoplay:"false",fullScreen:"false",cpindex:"552368"},d={quality:"high",bgcolor:"#ffffff",play:"true",loop:"true",wmode:"transparent",scale:"noscale",menu:"true",devicefont:"false",salign:"lt",allowscriptaccess:"sameDomain",allowFullScreen:"true"},e={id:a,name:a,align:"middle"};swfobject.embedSWF("res/imVideo.swf",a,b.width,b.height,"10.0.0","res/expressInstall.swf",c,d,e)})):g.empty().html("<div>Your browser must support HTML5 or Adobe Flash&tm;");break;case"youtube":m=!1,g=_jq(document.createElement("div")),g.css({"background-color":"black"}).width(b.width).height(b.height);var y=_jq(document.createElement("div")),z=null;_jq("#ytjsapi").length===0&&(z=_jq(document.createElement("script")),z.attr({id:"ytjsapi",type:"text/javascript"}),$("head").append(z),window.onYouTubePlayerAPIReady=function(){x5engine.youtube.jsApiIsLoaded=!0,_jq("body").trigger(x5engine.youtube.apiLoadedEventName)}),c=null,a="imytplayer_"+Math.round(Math.random()*1e8,10),y.attr("id",a),g.append(y),g.attr({"data-width":b.width,"data-height":b.height}),b.url=b.url.replace(/http\:\/\/[w]*\.?youtube\.com\/watch\?v=/g,""),b.url=b.url.replace(/http\:\/\/youtu\.be\/?/g,""),b.url.indexOf("&")!=-1&&(b.url=b.url.substring(0,b.url.indexOf("&"))),z.attr("src","http://www.youtube.com/player_api"),g.append(z);var A=function(){x5engine.youtube.jsApiIsLoaded?c=new YT.Player(a,{height:b.height,width:b.width,videoId:b.url,playerVars:{controls:b.showVideoControls?"1":"0"}}):_jq("body").unbind(x5engine.youtube.apiLoadedEventName,A).bind(x5engine.youtube.apiLoadedEventName,A)};g.bind("animate_in_end",A);break;case"vimeo":m=!1,a="imvimeoplayer_"+Math.round(Math.random()*1e8,10),g=_jq(document.createElement("div")),g.css("background-color","black").width(b.width).height(b.height),c=_jq(document.createElement("iframe")),g.append(c),g.attr({"data-width":b.width,"data-height":b.height}),b.url=b.url.replace(/[w\.]*vimeo\.com\/?/g,"").replace(/http?\:\/\//g,""),c.attr({src:"http://player.vimeo.com/video/"+b.url+"?byline=0&portrait=0&api=1&player_id="+a,width:b.width,height:b.height,frameborder:0});break;default:g=_jq(document.createElement("img")),g.attr("src",b.url),g.css({position:"absolute",top:-1e4});var B=b.width,C=b.height;g.attr({"data-width":b.width,"data-height":b.height});var D=o(B,C,b.contentWidth,b.contentHeight,!0);g.css({position:"absolute",left:D.x,top:D.y}),b.touchDevice&&g.css("-webkit-backface-visibility","hidden"),g.width(D.width).height(D.height),b.onclick!==null&&b.onclick!==undefined&&(_jq.isFunction(b.onclick)?g.click(b.onclick).css("cursor","pointer"):b.onclick.indexOf("http")===0&&(g.css("cursor","pointer"),window.location.href=b.onclick))}h=_jq(document.createElement("img")),b.thumb!==null&&b.thumb!==undefined?h.attr("src",b.thumb):h.attr("src",b.url),h.css("cursor","pointer"),b.effect!="random"&&!b.android?x5engine.imGallery.effects[b.effect]!==undefined&&x5engine.imGallery.effects[b.effect]!==null?l=x5engine.imGallery.effects[b.effect]:x5engine.imGallery.effects[b.effect]!==undefined&&x5engine.imGallery.effects[b.effect]!==null||x5engine.imGallery.effects.fade===undefined?l={animateIn:function(a,b,c){var d=a.DOMObject();b=_jq(b),d.css({position:"absolute",top:0,left:0}),b.append(d),d.show(0),_jq.isFunction(c)&&c()},animateOut:function(a,b,c){_jq(a.DOMObject()).detach(),_jq.isFunction(c)&&c()}}:l=x5engine.imGallery.effects.fade:b.android?l=x5engine.imGallery.effects.none:l="random"},o=function(a,b,c,d,e){if(e===undefined||e===null)e=!1;return e&&(c<a&&(b=c/a*b,a=c),d<b&&(a=d/b*a,b=d)),{x:(c-a)/2,y:(d-b)/2,width:a,height:b}},p=function(a,c){var d=b.width,e=b.height,f=c.parent().width(),g=c.parent().height(),h={x:(-f*a.x+(f-d)/2)*a.z+f/2,y:(-g*a.y+(g-e)/2)*a.z+g/2,z:a.z};return h},q=function(a,c){if(c>b.moves.length-1||b.moves[c]===undefined)return;var d=o(b.width*b.moves[c].z,b.height*b.moves[c].z,b.contentWidth,b.contentHeight,!0),e=p(b.moves[c],a);a.animate({left:b.moves[c].z<=1?d.x:e.x,top:b.moves[c].z<=1?d.y:e.y,width:Math.round(b.width*e.z),height:Math.round(b.height*e.z)},{duration:b.autoplayTime/(b.moves.length-1),complete:function(){q(a,c+1)}}),g.bind("animate_out_start",function(){a.stop(!1,!1)})};this.Cache=function(a){_jq.extend({load:null,error:null},a);switch(b.type){case"image":f[f.length]=new Image;var c=_jq(f[f.length-1]);c.load(function(){_jq(this).unbind("load"),b.thumb!==null&&b.thumb!==undefined?(f[f.length]=new Image,c=_jq(f[f.length-1]),c.load(function(){_jq(this).unbind("load"),n(),_jq.isFunction(a.load)&&a.load(i)}).bind("error",function(){b.thumb=null,n(),_jq.isFunction(a.load)&&a.load(i)}),c.attr("src",b.thumb)):(n(),_jq.isFunction(a.load)&&a.load(i))}).bind("error",function(){_jq.isFunction(a.error)&&a.error(i,404)}),c.attr("src",b.url);break;case"video":case"youtube":case"vimeo":b.thumb!==null&&b.thumb!==undefined?(f[f.length]=new Image,c=_jq(f[f.length-1]),c.load(function(){_jq(this).unbind("load"),n(),_jq.isFunction(a.load)&&a.load(i)}).bind("error",function(){b.thumb=null,n(),_jq.isFunction(a.load)&&a.load(i)}),c.attr("src",b.thumb)):(n(),_jq.isFunction(a.load)&&a.load(i));break;default:n(),_jq.isFunction(a.load)&&a.load(i)}},this.AnimateIn=function(a,c,d){g.find("embed, object, iframe").fadeOut(0);var e=function(a){var d=a.DOMObject();d.find("embed, object, iframe").fadeIn(0),d.trigger("animate_in_end"),b.moves.length>1&&b.type==="image"&&q(g,1),_jq.isFunction(c)&&c(a)},f=null,h=o(g.attr("data-width"),g.attr("data-height"),b.contentWidth,b.contentHeight,!0);g.css("position","absolute");if(b.moves.length>0&&b.type==="image"){var j=p(b.moves[0],g);f={y:j.y,x:j.x,width:Math.round(h.width*j.z),height:Math.round(h.height*j.z)}}else f={y:h.y,x:h.x,width:h.width,height:h.height};g.trigger("animate_in_start");if(b.effect=="random"){var k=["fade","horizontalSlide","verticalSlide","zoom","elasticFromTop","elasticFromBottom","elasticFromRight","elasticFromLeft","bounceFromTop","bounceFromBottom","bounceFromLeft","bounceFromRight","rotateLinear"],m=Math.max(0,Math.floor(Math.random()*k.length));l=x5engine.imGallery.effects[k[m]]}if(l!==null&&l!==undefined){var n=x5engine.utils.supportsCSS("transformOrigin");n&&g.css(n,"50% 50%");var r=x5engine.utils.supportsCSS("transform");r&&g.css(r,"rotate(0deg)"),l.animateIn(i,f,a,e,d)}else g.trigger("animate_in_end")},this.AnimateOut=function(a,c,d){g.find("embed, object, iframe").fadeOut(0);var e=function(a){var b=a.DOMObject();b.trigger("animate_out_end"),_jq.isFunction(c)&&c(a)};if(b.effect=="random"&&l=="random"){var f=["fade","horizontalSlide","verticalSlide","zoom","elasticFromTop","elasticFromBottom","elasticFromRight","elasticFromLeft","bounceFromTop","bounceFromBottom","bounceFromLeft","bounceFromRight","rotateLinear"],h=Math.max(0,Math.floor(Math.random()*f.length));l=x5engine.imGallery.effects[f[h]]}g.trigger("animate_out_start"),l!==null&&l!==undefined?l.animateOut(i,a,e,d):g.trigger("animate_out_end")},this.DOMObject=function(){return g},this.GetThumb=function(){return h},this.Type=function(){return b.type},this.PlayVideo=function(){},this.PauseVideo=function(){if(b.type==="video"){var a=g.find("video");a.length&&a[0].pause!==undefined&&a[0].pause()}},this.StopVideo=function(){},this.GetDescription=function(){return x5engine.utils.htmlspecialchars_decode(b.description)},this.AutoplayTime=function(){return b.autoplayTime},this.Width=function(){return b.moves.length===0?b.width:b.moves[0].z*b.width},this.Height=function(){return b.moves.length===0?b.height:b.moves[0].z*b.height},this.ContentHeight=function(a){if(a===null||a===undefined)return b.contentHeight;b.contentHeight=a},this.ContentWidth=function(a){if(a===null||a===undefined)return b.contentWidth;b.contentWidth=a},this.Overlay=function(){return m}}});